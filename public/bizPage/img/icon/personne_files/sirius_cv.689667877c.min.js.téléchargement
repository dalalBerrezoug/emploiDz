!function(t,$,s){var jQuery=$,o={cv:{route:"cvs.cv.edit",submitSection:!1},basic:{route:"cvs.cv.section.edit"},recruitment:{route:"cvs.cv.section.edit"},experiences:{multiple:!0,singleName:"experience",route:"cvs.cv.section.item.edit",newRoute:"cvs.cv.section.new"},trainings:{multiple:!0,singleName:"training",route:"cvs.cv.section.item.edit",newRoute:"cvs.cv.section.new"},languages:{multiple:!0,route:"cvs.cv.section.edit",multiEdit:!0},skills:{multiple:!0,route:"cvs.cv.section.edit",multiEdit:!0}};Ember.STRINGS=Ember.Object.create({INCOMPLETE_CV_TEXT_FIRST_TIME:'<div class="row-fluid"><div class="span8 spaced"><h3 class="color-a spaced-bot"> Important !</h3><br> Depuis votre dernière visite, des modifications ont été apportées sur le site, il se peut que le remplissage de votre CV ait changé.  </div> <div class="span4 spaced-top text-center">   Cliquez sur les sections en rouge pour compléter votre Cv.</div><div class="assistant-arrow-warn hidden-phone"><i class="fa fa-arrow-down"></i></div></div>',INCOMPLETE_CV_TEXT:'<div class="row-fluid"><div class="span8 spaced"><h3 class="color-a spaced-bot"> Important !</h3> <br>Depuis votre dernière visite, des modifications ont été apportées sur le site, il se peut que le remplissage de votre CV ait changé.  </div> <div class="span4 spaced-top text-center">   Cliquez sur les sections en rouge pour compléter votre Cv.</div><div class="assistant-arrow-warn hidden-phone"><i class="fa fa-arrow-down"></i></div></div>',INCOMPLETE_CV_TEXT_MESSAGE:' <div class="row-fluid"><div class="span8 spaced"><h3 class="color-a spaced-bot"> Attention !</h3><br> Remplissez votre CV à 100% pour être visible pour les recruteurs.  </div> <div class="span4 spaced-top text-center">   Renseignez les sections manquantes en rouge pour le compléter.</div><div class="assistant-arrow-warn hidden-phone"><i class="fa fa-arrow-down"></i></div></div>',URL_EXAMPLES:'<div class="text-left"><br>Examples:<br>%@</div>',URL_FORMAT_INVALID:"Format d'url ou de compte incorrect",INVALID_FORM:"Veuillez remplir les champs obligatoires indiqués en rouge avant de continuer",PROGRESS_LOADING0:"Initialization",PROGRESS_LOADING1:"Chargement des CVs",PROGRESS_LOADING2:"Chargement des données de l'application",PROGRESS_LOADING3:"Terminé",EDIT_EXPERIENCE_TITLE:"Edition expérience",EDIT_NEW_EXPERIENCE_TITLE:"Nouvelle expérience",EDIT_TRAINING_TITLE:"Edition formation",EDIT_NEW_TRAINING_TITLE:"Nouvelle formation",EDIT_RECRUITMENT_TITLE:"Edition profil recrutement",EDIT_BASIC_TITLE:"Edition des informations personnelles",BASIC_TITLE:"Informations persos & contacts",YEARS:"ans",COM_CV_EDIT:"Modifier",COM_CV_ADD:"Ajouter",COM_CV_SAVE_ITEM:"Enregistrer",COM_CV_VALIDATE_ITEM:"Confirmer",COM_CV_CANCEL:"Annuler",COM_CV_ACTIONS_DELETE:"Supprimer",COM_CV_UPDATE_CV:"Sauvegarder les modification du CV",COM_CV_NEW_CV_DEFAULT_TITLE:"Nouveau CV",CV_CREATE_TITLE:"Nouveau CV",CV_UPDATE_TITLE:"Edition Information CV",CV_DUPLICATE_TITLE:"Duplication du CV",CV_ACTION_IS_DEFAULT_TEXT:"Marqué comme votre CV par défault",CV_ACTION_SET_AS_DEFAULT_TEXT:"Marquer comme CV par défault",CV_ACTION_NEW_CV_TEXT:"Nouveau CV",CV_ACTION_DOWNLOAD_TEXT:"Télécharger en PDF",CV_ACTION_PREVIEW_TEXT:"Apérçu",CV_ACTION_PRINT_TEXT:"Imprimer",CV_ACTION_DUPLICATE_TEXT:"Dupliquer ce CV",CV_ACTION_DELETE_TEXT:"Supprimer",COVER_LETTER_ADD_OPTION_TEXT:"Ajouter à mes lettres de motivation",COVER_LETTER_DEFAULT_LETTER:"Nouvelle lettre",COVER_LETTER_UPDATE_OPTION_TEXT:"Mettre à jour la lettre de motivation",EMPTY_CV_TITLE_ERROR:"Veuillez renseigner votre Poste actuel ou souhaité",UNKNOWN_ERROR:"Une erreur inconnu est survenue",WARNING_ICON:"exclamation-circle",ERROR_ICON:"times-circle",INFO_ICON:"info-circle",SUCCESS_ICON:"check-circle",CLOSE_ICON:"times",CANCEL:"Annuler",SHOW_CV:"Visualizer le CV",HIDE_CV:"Cacher le CV",CV_INVALID:"Votre CV n'est pas valide",CV_STATUS_ENABLED_DESC:"Votre CV est activé et peut être consulté par les recruteurs.",CV_STATUS_CONFIDENTIAL_DESC:"Votre CV est activé et peut être consulté par les recruteurs mais vos coordonnées et votre employeur actuel ne sont pas visibles.",CV_STATUS_DISABLED_DESC:"Votre CV n'est pas consultable par les recruteurs.",REQUIRED_PHONE:"Au moins un téléphone est requis",REQUIRED_EMAIL:"Au moins une adresse e-mail est requise",JOB_APPLY_APPLY:"Postuler",JOB_APPLY_GO_QUESTIONNAIRE:"Suivant",JOB_APPLY_GO_CV:"Précédent",JOB_APPLY_EDIT_MY_CV:"Editer mon CV",JOB_APPLY_FILL_MY_CV:"Remplire mon CV",JOB_APPLY_ADD_COVER_LETTER:"Ajouter une lettre de motivation",HAVE_LICENSE_DRIVE_LABEL:"Permis de conduire",HAVE_CAR_LABEL:"Véhiculé",HAVE_VALID_PASSPORT_LABEL:"Passeport",HAVE_NO_MILITARY_DUTY_LABEL:"Service militaire",NEXT_LABEL:"Suivant",SAVE_AND_CLOSE_LABEL:"Enregistrer et fermer",SAVE_LABEL:"Enregistrer",ADD_NEW_EXPERIENCE_LABEL:"Ajouter une Expérience",ADD_NEW_TRAINING_LABEL:"Ajouter une Formation",ADD_LANGUAGES_LABEL:"Ajouter des Langues",ADD_SKILLS_LABEL:"Ajouter des Compétences",NO_ATTACHMENT:"Pas de pièce jointe",ATTACHMENT_NOTHING_TO_UPLOAD:"Ce fichier est trop volumineux",ATTACHMENT_WARNING:"Un fichier joint PDF ou Word  est important auprès des recruteurs",FILE_NOT_ALLOWED:"Ce fichier n'a pas été accépté, veuillez choisir un autre!",REQUEST_ERROR:"Une erreur s'est produite pendant l'envoi du fichier",ACTION_RETRY:"Réésayer",REQUIRED_FIELD:"Veuillez d'abord remplir ce champ",NO_DESCRIPTION:"Aucune description",DATE_FINISHED:"De %@ %@ à %@ %@",DATE_ONGOING:"Depuis %@ %@ (en cours)",DATE_UNDEFINED:"(Date non définie)",UPLOAD_FILE_TITLE:"Téléchargez votre photo d'identité",REQUEST_NEW_VALIDAT_EMAIL_IS_LOADIN:"Envois d'email est en cours",REQUEST_NEW_VALIDAT_EMAIL:"Envoyer un mail de validation",VALIDATION_EMAIL_SENT:"Un email de validation a été envoyé a cette adresse",VALIDATION_EMAIL_NOT_SENT:"Impossible d'envoyer l'email de validation, veuillez réessayer",INVALID_SESSION:"Veuillez rafraîchir la page et essayez à nouveau",DID_YOU_MEAN:"Voulez-vous dire : "});var h=Ember.get,m=Ember.set,e=Elib.Store.attr,i=$("meta[name=app-container]").attr("content");new Date;Ember.Application.initializer({name:"loading-remover",initialize:function(e,t){Ember.run.scheduleOnce("afterRender",t,function(){$(".bootstrap-progress").remove()})}});var a=Ember.Application.create({rootElement:i,Serializer:Elib.BasicSerializer.extend({convertBoolToInt:!0})});function r(e,t,i){t="boolean"==typeof t?(i=t,0):+t;var n=window.innerHeight,s=e.outerHeight(),r=e.offset().top;return i&&s<n?r-(n-s)/2:r-t}function l(e,t){t=t||2;var i=new Array(t+1);return e=String(e),((i=i.join("0"))+e).slice(-t)}function c(e){return e=Number(e),isNaN(e)?0:e}function n(t){return function(){var e=h(this,t);return Elib.isArray(e)?e:[]}.property(t)}Ember.View.reopen({scrollCentralize:!1,scrollOffset:50,scrollToView:function(e){return function(t,i,n){var s=t&&t.$();return s?new Ember.RSVP.Promise(function(e){$("html, body").animate({scrollTop:r(s,i,n)},"slow",function(){e(t)})}):Ember.RSVP.Promise.resolve()}(this,h(this,"scrollOffset"),h(this,"scrollCentralize"))},immediateScrollToView:function(e){return function(e,t,i){var n=e&&e.$();if(n){var s=r(n,t,i);return $("html, body").scrollTop(s),s}}(this,h(this,"scrollOffset"),h(this,"scrollCentralize"))}}),a.Session=Elib.Session.extend({data:Elib.LazyModel.create(),queryParam:Elib.parseQuery(),assistant:Ember.computed.bool("queryParam.assistant"),firstVisit:Ember.computed.bool("queryParam.firstvisit"),autoCreateCv:Ember.computed.bool("noaccount"),userPhones:n("data.common.phones"),userEmails:n("data.common.emails"),loadingStep:0,updateToken:function(){var t=this;h(this,"container").lookup("server:main").getJSON({task:"cv.getToken"}).then(function(e){t.set("token",e.token),t.tokenRenewSchedule()}).catch(function(){document.location.reload()})},tokenRenewSchedule:function(){this.tokenTimer=setTimeout(this.updateToken.bind(this),this.tokenRenewInterval)},getData:function(){var e,t=this,i=h(this,"dataSourceManager"),n=h(this,"data");return h(n,"hasLoaded")||(m(this,"loadingStep",1),e=h(this,"container").lookup("server:main"),h(n,"isLoading")||(m(n,"isLoading",!0),e.getJSON({task:"cv.read"}).then(function(e){m(t,"assistantTexts",h(e,"assistantTexts")),m(t,"loadingStep",2),Ember.merge(t,h(e,"config")),t.tokenRenewSchedule(),i.load(h(e,"config.listsUrl")).then(function(){m(t,"loadingStep",3),setTimeout(function(){n.resolve(e)},500)})},function(e){m(t,"loadingStep",3),n.reject(e)}))),n}});h=Ember.get,m=Ember.set;var u=$("meta[name=base-url]").attr("content")+"/",d=$("meta[name=api-url]").attr("content")+"/";a.ServerHandler=Elib.ServerHandler.extend({actions:{redirect:function(e){window.location=e.url}},baseUrl:u,apiUrl:d,handleAction:function(e){var t=h(e,"action"),i=t&&h(this,"actions."+t);t&&(Ember.warn("Nothing to handle the server action `"+t+"`",i),i&&i.call(this,h(e,"data")))},responseHandler:function(e,t){if(e.get("success"))return this.handleAction(e),e.get("data");var i=this.container.lookup("controller:cvsCv");if(i._editDescriptor){var n=h(i,"session.token"),s=h(i,"assistant"),r={jform:{type:"cv",cvId:h(i,"cvId"),action:"serverError",message:e.get("error"),isNew:h(this,"isNew"),cvFillingRate:h(i,"cvFillingRate"),cvSection:h(i._editDescriptor,"section"),itemId:h(i._editDescriptor,"recordId")||0,itemIsNew:h(i._editDescriptor,"isNew")?1:0,firstVisit:h(i,"firstVisit")?1:0,assistantCurrentCvId:h(s,"currentId"),assistantDone:h(s,"done"),assistantPending:h(s,"pending"),assistantCurrentStep:h(s,"currentStep"),assistantIssuesCount:h(s,"issues.length"),assistantIssues:h(s,"issues"),assistantProgress:h(s,"progress"),assistantTotalIssues:h(s,"totalIssues"),assistantProgress:h(s,"progress"),assistantFillingRate:h(s,"fillingRate"),assitantEnabled:h(s,"isEnabled"),assistantFillingErrors:h(s,"errors").mapBy("message"),assistantFillingWarnings:h(s,"warnings").mapBy("message")},task:"tracking.log"};n&&(r[n]=1)}return this.saveJSON(r),this.handleAction(e),Elib.RequestError.create({content:t,message:e.get("error"),name:"ServerError"})},getJSON:function(){return this._super.apply(this,arguments).catch(function(e){var t=h(e,"message");if(/^(Unexpected token|No data)/.test(t))throw"INVALID_SESSION";throw e})}}),a.Router.map(function(){this.route("questionnaire",{path:"/questionnaire"}),this.route("assistant",{path:"/assistant"}),this.route("firstVisit",{path:"/first-visit"}),this.resource("cvs",{path:"/"},function(){this.route("new",{path:"/new"}),this.route("cv",{path:"/:cv_id"},function(){this.route("edit",{path:"/edit"}),this.route("duplicate",{path:"/duplicate"}),this.route("section",{path:"/:section_name"},function(){this.route("edit",{path:"/edit"}),this.route("new",{path:"/new"}),this.route("item",{path:"/:record_id"},function(){this.route("edit",{path:"/edit"})})})})})}),a.CvFormsMixin=Ember.Mixin.create({needs:["cvsCv"],canGoNext:Ember.computed.bool("assistant.nextIssue"),canBypassAssistant:Ember.computed.not("assistant.forceAssistant"),canAbort:Ember.computed("assistant.isEnabled","assistant.forceAssistant",function(){return!h(this,"assistant.isEnabled")||!h(this,"assistant.forceAssistant")}),saveText:"COM_CV_SAVE_ITEM",saveAction:"submit",params:Ember.computed("controllers.cvsCv.cvId","session.token",function(){var e=this.get("controllers.cvsCv.cvId"),t=this.get("session.token"),i={jform:{cvId:e}};return t&&(i[t]=1),i})}),a.Router.reopen({trackEdit:function(e,t,i){var n=h(e,"server"),s=h(e,"session.token"),r={jform:{type:"cv",action:"cvEdit",cvId:h(e,"cvId"),isAssistant:h(i,"isEnabled")?1:0,cvFillingRate:h(e,"cvFillingRate"),cvSection:h(t,"section"),itemId:h(t,"recordId")||0,itemIsNew:h(t,"isNew")?1:0,firstVisit:h(e,"firstVisit")?1:0,assistantCurrentCvId:h(i,"currentId"),assistantDone:h(i,"done"),assistantPending:h(i,"pending"),assistantCurrentStep:h(i,"currentStep"),assistantIssuesCount:h(i,"issues.length"),assistantIssues:h(i,"issues"),assistantProgress:h(i,"progress"),assistantTotalIssues:h(i,"totalIssues"),assistantProgress:h(i,"progress"),assistantFillingRate:h(i,"fillingRate"),assitantEnabled:h(i,"isEnabled"),assistantFillingErrors:h(i,"errors").mapBy("message"),assistantFillingWarnings:h(i,"warnings").mapBy("message")},task:"tracking.log"};s&&(r[s]=1),n.saveJSON(r)},toggleDetailsTracking:function(n,s){n.reopen({tracking:function(){var e=h(n,"server"),t=h(n,"session.token"),i={jform:{type:"cv",cvId:h(s,"cvId"),action:"toggleDetails",toggleDetails:h(n,"toggleDetails")?1:0,section:h(n,"title")},task:"tracking.log"};t&&(i[t]=1),e.saveJSON(i)}.observes("toggleDetails")})},formTracking:function(l,c){l.reopen({tracking:function(){var e=h(l,"server"),t=h(l,"session.token"),i=h(c,"assistant"),n={type:"cv",cvId:h(c,"cvId"),action:"formError",isNew:h(l,"isNew"),cvFillingRate:h(i,"model.totalRate"),cvSection:h(c._editDescriptor,"section"),itemId:h(c._editDescriptor,"recordId")||0,itemIsNew:h(c._editDescriptor,"isNew")?1:0,firstVisit:h(c,"firstVisit")?1:0,assistantCurrentCvId:h(i,"currentId"),assistantDone:h(i,"done"),assistantPending:h(i,"pending"),assistantCurrentStep:h(i,"currentStep"),assistantIssuesCount:h(i,"issues.length"),assistantIssues:h(i,"issues"),assistantProgress:h(i,"progress"),assistantTotalIssues:h(i,"totalIssues"),assistantProgress:h(i,"progress"),assistantFillingRate:h(i,"fillingRate"),assitantEnabled:h(i,"isEnabled"),assistantFillingErrors:h(i,"errors").mapBy("message"),assistantFillingWarnings:h(i,"warnings").mapBy("message")},s=h(l,"fields"),r=h(l,"model"),o=(Ember.keys,[]);if(s.map(function(e){if(1==h(e,"required")&&"object"==typeof e.__ember_meta__){var t=e.__ember_meta__.source.valueBinding;if("object"==typeof t){var i=t._from.split("_parentView.context.").pop();void 0===h(r,i)||h(r,i)||o.push(i)}}}),n.errorFields=o,n.errorFields.length){var a={jform:n,task:"tracking.log"};t&&(a[t]=1),e.saveJSON(a)}}.observes("error")})},tracking:function(){var i=this.container.lookup("controller:cvsCv");Ember.run.next(this,function(){var e=this;if(i._editDescriptor){setTimeout(function(){e.trackEdit(i,i._editDescriptor,h(i,"assistant"))},100);var t=i._editDescriptor.controller;h(t,"toggleDetailsIsTracked")||(this.toggleDetailsTracking(t,i),m(t,"toggleDetailsIsTracked",!0)),h(t,"errorIsTracked")||(this.formTracking(t,i),m(t,"errorIsTracked",!0))}})}.on("didTransition")}),a.Session.reopen({tracking:function(){var e=h(this,"container").lookup("server:main"),t=h(this,"token"),i={jform:{type:"cv",action:"cvLoad",loadStep:h(this,"loadingStep")},task:"tracking.log"};t&&(i[t]=1),e.saveJSON(i)}.observes("loadingStep")});h=Ember.get,m=Ember.set;a.TagControllerMixin=Ember.Mixin.create({isTag:!0,isEditing:Ember.computed.alias("target.isEditing"),maxRank:Ember.computed.alias("target.maxRank"),ranksList:Ember.computed.alias("target.ranksList"),rank:null,levelId:null,levelIdKey:null,_observeChanges:!0,init:function(){this._super();var e=h(this,"levelIdKey");m(this,"levelId",h(this,e)),h(this,"isNew")&&(this.save(),m(this,"isValid",!0))},actions:{retry:function(){this.save()},remove:function(){this.triggerAction("removeEntry",this)}},validate:function(){return!!h(this,"levelId")},dirtyDidChange:function(){var e=!!h(this,"levelId")&&!h(this,"isNew");m(this,"isValid",e)}.observes("levelId","isNew","isDirty").on("init"),levelIdDidChange:function(){if(this._observeChanges){var e=h(this,"ranksList"),t=h(this,"levelId"),i=e&&e.findBy("id",String(t));t&&(this._observeChanges=!1,m(this,"rank",e.indexOf(i)+1),this._observeChanges=!0)}}.observes("levelId").on("init"),rankDidChange:function(){if(this._observeChanges){var e=h(this,"rank"),t=h(this,"levelIdKey"),i=h(this,"ranksList").objectAt(e-1)||{},n=h(i,"id");n&&(this._observeChanges=!1,this.set("levelId",n),this.set(t,n),this._observeChanges=!0,this.save())}}.observes("rank").on("init")}),a.TagsControllerMixin=Ember.Mixin.create({init:function(){Ember.defineProperty(this,"ignoredTexts",Ember.computed.map("content",function(e){return(h(e,"displayText")||"").toLowerCase().trim()})),Ember.defineProperty(this,"ignored",Ember.computed.map("content",function(e){return{txt:h(e,"displayText")}})),this._super()},multiEdit:!0,showFooter:Ember.computed.alias("isEditing"),dataSourceName:null,autocompleteUrl:Ember.computed.alias("session.autocompleteUrl"),autocompleteQueryKey:Ember.computed.alias("session.autocompleteQueryKey"),autocompleteQueryParam:Ember.computed.alias("session.autocompleteQueryParam"),sourceUrl:function(){return h(this,"autocompleteUrl")+"&"+h(this,"autocompleteQueryKey")+"="+h(this,"dataSourceName")}.property("autocompleteUrl","autocompleteQueryKey","dataSourceName"),selection:null,value:null,ranksListName:null,valueKeyName:null,canGoNext:Ember.computed.bool("assistant.nextIssue"),canClose:function(){return!h(this,"hasError")&&h(this,"isValid")}.property("hasError","isValid"),buttonsDisabled:Ember.computed.not("canClose"),forceSelection:!0,ignored:Ember.computed.instance([]),actions:{doneEditing:function(){},editing:function(){},removeEntry:function(e){var t=h(e,"model");return this.removeItem(t),!1},confirm:function(){var e=(h(this,"rawValue")||"").trim(),t={label:e,id:null};e&&(this.add(t),m(this,"rawValue"),m(this,"value"))},edit:function(){if(h(this,"canClose"))return m(this,"assistant.isEnabled",!1),h(this,"isEditing")?this.get("target").send("doneEditing",h(this,"model")):this.get("target").send("editing",h(this,"model"))},next:function(){var e=h(this,"assistant");m(this,"isEditing",!1),Ember.run.scheduleOnce("afterRender",e,e.editNext)},close:function(){}},ranksList:Elib.computed.dataSource("ranksListName"),selectedIds:null,maxRank:function(){var e=h(this,"ranksList");return e&&h(e,"length")||5}.property("ranksList"),add:function(e){var t=h(this,"ignoredTexts"),i=(e.label||"").toLowerCase().trim();t.contains(i)||this.addItem(this.serialize(e))},selectionChange:function(){var e=this.get("selection");e&&e.id&&(this.add(e),this.set("selection",null),this.set("rawValue",null),this.set("value",null))}.observes("selection"),serialize:function(e){var t=h(this,"valueKeyName"),i={displayText:e.label};return i[t]=e.id,$(".autocomplete").css("display","none"),i}}),a.ToggleDetailsMixin=Ember.Mixin.create({toggleDetailsFooter:!0,toggleDetails:!1,actions:{toggleDetails:function(){this.toggleProperty("toggleDetails")}}}),a.ServerResponse=Elib.Model.extend({success:null,action:null,data:null,error:null,warn:null,message:null});var p=["profession","professionalSituation","experienceYears","availability","mobility","professionalStatus","jobLevel","sector","educationLevel","wishedSalary","schoolType","teamSize","companyType","companySize"];a.DataSourceManager=Elib.DataSourceManager.extend({dataSourceNames:["cvStatus","cvLanguage","profession","professionalSituation","experienceYears","availability","mobility","professionalStatus","jobLevel","sector","educationLevel","wishedSalary","langLevel","skillLevel","schoolType","teamSize","companyType","companySize","maritalStatus"],professions:Ember.computed.filterBy("loadedDataSources","name","profession"),dataSourcesDidChange:function(){var e=this.get("professions"),i=this.dataSource("professionLevel2");0<e.length&&e.forEach(function(e){var t=Array.prototype.concat.apply([],e.mapBy("children"));i.pushObjects(t)})}.observes("professions.length"),addplaceHolder:function(){var i=this;setTimeout(function(){0!=h(i,"isLoading")&&i.addplaceHolder(),p.forEach(function(e){var t=Ember.Object.create({id:null,label:"Sélectionner..."});i.get(e).insertAt(0,t)})},50)}.observes("hasLoaded"),init:function(){this.get("professions"),this.addDataSource("professionLevel2",[Ember.Object.create({id:null,label:"Sélectionner..."})]),this.addDataSource("cvLang",[{id:"fr-FR",label:"Français"},{id:"en-GB",label:"Anglais"}]),this.addDataSource("month",[{id:"1",label:"Janvier"},{id:"2",label:"Février"},{id:"3",label:"Mars"},{id:"4",label:"Avril"},{id:"5",label:"Mai"},{id:"6",label:"Juin"},{id:"7",label:"Juillet"},{id:"8",label:"Août"},{id:"9",label:"Septembre"},{id:"10",label:"Octobre"},{id:"11",label:"Novembre"},{id:"12",label:"Décembre"}]),this._super()}}),a.Detail=Elib.Model.extend({recordId:null,rate:null,type:null,message:null,section:null,systemMessages:null}),a.Detail.reopen({rate:Ember.computed(function(e,t){if(1<arguments.length&&0<(t=t&&Math.round(t)))return t}),systemMessages:Ember.computed(function(e,t){if(1<arguments.length){var i=h(this,"type"),n=t&&[];return{name:"validationError",isError:"error"===i,isWarning:"warning"===i,invalidEntries:t&&t.filter(function(e){if(-1===n.indexOf(e.message))return m(e,"fieldName",h(e,"fieldName").camelize()),n.push(e.message),!0}),message:n}}}),isError:Ember.computed.equal("type","error"),isWarning:Ember.computed.equal("type","warning")}),a.FillingAssistant=Elib.Model.extend({totalRate:null,details:null}),a.Company=Elib.Model.extend({name:null,sectorId:null,sizeId:null,typeId:null}),a.Email=Elib.Model.extend({email:"",id:null,isActive:null}),a.Email.reopen({label:Ember.computed.alias("email"),isActive:!1}),a.Phone=Elib.Model.extend({phone:"",isActive:!0}),a.Phone.reopen({label:Ember.computed.alias("phone")});h=Ember.get;var v=/^(https?:?\/?\/?)?/i;a.Link=Elib.Model.extend({url:Ember.computed(function(e,t){if(1<arguments.length)return t&&5<=t.length?t.replace(v,"https://"):t}),linkIcon:null,name:Ember.computed.alias("modelName"),patterns:null,icon:Ember.computed(function(){var e=h(this,"linkIcon")||h(this,"name"),t=e&&" fa fa-"+e.dasherize()||"";return h(this,"isValid")?t+" vendor-color ":t}).property("name","isValid"),isValid:Ember.computed("url",function(e,t){if(1<arguments.length)return t;var i,n,s=h(this,"url")||"",r=Ember.makeArray(h(this,"patterns"));if(s=s.trim(),0===r.length)return!!s;for(i=0;i<r.length;i++)if((n=r[i].exec(s))&&n[2])return!0;return!1}),label:Ember.computed("icon",function(){return(h(this,"name")||"").dasherize().replace("-"," ").capitalize()||"No Label!"})});var E=/^(http[s]?:\/\/)?((?:[^.:\/ ]+\.)?(?:[^.: ]+)(?:\.[^\.:\/ ]+)(\/[^: ]+)?)[^.]\/?$/i;a.Skype=a.Link.extend({url:null,patterns:/^([ ])?([^ ]*?)$/i,exampleUrls:["mohamed_ali"]}),a.Facebook=a.Link.extend({exampleUrls:["https://facebook.com/mohamed_ali"],patterns:/^(?:(http[s]?:\/\/)?(?:www\.)?facebook\.[a-z]{2,3}\/)([^ \/]*)\/?$/i}),a.Twitter=a.Link.extend({exampleUrls:["https://twitter.com/mohamed_ali"],patterns:/^(http[s]?:\/\/)?(?:www\.)?twitter\.[a-z]{2,3}\/([^ \/]*)\/?$/i}),a.Linkedin=a.Link.extend({exampleUrls:["https://linkedin.com/pub/mohamed_ali/de/cc1/185","https://linkedin.com/in/mohamed_ali"],patterns:/^(http(s)?:\/\/)?([\w]+\.)?linkedin\.com\/(pub|in|profile)/}),a.Rss=a.Link.extend({exampleUrls:["https://monsiteweb.com/newsrss"],patterns:E}),a.Website=a.Link.extend({label:"Site web",linkIcon:"globe",exampleUrls:["https://monsiteweb.com/"],patterns:E}),a.GooglePlus=a.Link.extend({label:"Google+",exampleUrls:["https://google.com/+mohamed_ali","https://plus.google.com/mohamed_ali"],patterns:[/^(http[s]?:\/\/)?plus\.google\.[a-z]{2,3}\/([^\+\ ](?:[^ \/]*))\/?$/i,/^(http[s]?:\/\/)?(?:(?:www|plus)\.)?google\.[a-z]{2,3}\/\+([^ \/]*)\/?$/i]}),a.UserLinks=Elib.Model.extend({facebook:null,twitter:null,googlePlus:null,linkedin:null,skype:null,rss:null,website:null}),a.UserHas=Elib.Model.extend({driveLicense:null,passport:null,car:null,noMilitaryDuty:null}),a.School=Elib.Model.extend({name:null,schoolTypeId:null,logo:null}),a.Location=Elib.Model.extend({id:null,displayText:null,label:null}),a.CvCompany=a.Company.extend(),a.UserLocation=a.Location.extend(),a.CvPhoto=Elib.Model.extend({attachmentId:null,forceCrop:null,cropX:null,cropY:null,cropH:null,cropW:null}),a.CvPhoto.primaryKey="attachmentId",a.Basic=Elib.Model.extend({age:null,cvId:null,cvPhoto:null,userFirstName:null,userLastName:null,userAge:null,userBirthday:null,userGenderId:null,userMaritalStatusId:null,userAddress:null,userLocation:null,cvPhones:null,cvEmails:null,cvFacebook:null,cvTwitter:null,cvGooglePlus:null,cvLinkedin:null,cvSkype:null,cvRss:null,cvWebsite:null,cvDriveLicense:e("boolean"),cvPassport:e("boolean"),cvCar:e("boolean"),cvNoMilitaryDuty:e("boolean")}),a.Basic.reopen({isValid:Ember.computed.not("isNew")}),a.Basic.primaryKey="cvId",a.CvEmail=a.Email.extend(),a.CvPhone=a.Phone.extend();var f={file:"fa fa-file",pdf:"fa fa-file-pdf-o",docx:"fa fa-file-doc-o",doc:"fa fa-file-doc-o",rtf:"fa fa-file-doc-o",pptx:"fa fa-file-powerpoint-o",ppt:"fa fa-file-powerpoint-o",xls:"fa fa-file-excel-o",xlsx:"fa fa-file-excel-o",jpeg:"fa fa-file-image-o",jpg:"fa fa-file-image-o",tiff:"fa fa-file-image-o",png:"fa fa-file-image-o",txt:"fa fa-file-text-o",text:"fa fa-file-text-o"},g=/(.*?)\.([^.]+)$/;a.Attachment=Elib.Model.extend({attachmentId:null,attachmentOriginalName:null}),a.Attachment.reopen({fileIcon:Ember.computed("extension",function(){var e=h(this,"extension");return f[e]||f.file}),basename:Ember.computed("attachmentOriginalName",function(){var e=h(this,"attachmentOriginalName");if(e)return g.exec(e)[1]}),extension:Ember.computed("attachmentOriginalName",function(){var e=h(this,"attachmentOriginalName");if(e)return g.exec(e)[2]})});Elib.isBoolean;a.Cv=Elib.Model.extend({bindValues:function(){this.set("fillingAssistant.isDirty",!1)}.on("init"),cvId:null,cvStatusId:null,fillingAssistant:null,cvTitle:null,cvLangId:null,cvIsDefault:e("boolean"),cvCreated:e("date",{mysqlDate:!0,defaultValue:new Date}),cvModified:e("date",{mysqlDate:!0,defaultValue:new Date}),cvFillingRate:null,attachments:null,basic:null,recruitment:null,experiences:null,trainings:null,skills:null,languages:null,meta:null}),a.Cv.primaryKey="cvId",a.ExpeCompany=a.CvCompany.extend(),a.ExpeLocation=a.Location.extend(),a.Experience=Elib.Model.extend({expeId:null,cvId:null,expeTitle:null,expeProfessionId:null,expeJobLevelId:null,expeCompany:null,expeLocation:null,expeStartDay:1,expeStartMonth:null,expeStartYear:null,expeEndDay:1,expeEndMonth:null,expeEndYear:null,expeIsCurrent:!1,expeDescription:null,expeManagedTeamSizeId:null}),a.Experience.reopen({sortTime:Ember.computed("expeIsCurrent","expeStartYear","expeStartMonth","expeEndYear","expeEndMonth",function(){var e=h(this,"expeIsCurrent"),t=e?"1":"",i=c(h(this,"expeStartYear")),n=c(h(this,"expeStartMonth")),s=e?0:c(h(this,"expeEndYear")),r=e?0:c(h(this,"expeEndMonth"));return Number(t+l(s,4)+l(i,4)+l(r)+l(n)+l(1)+l(1))})}),a.Experience.primaryKey="expeId",a.TraiSchool=a.School.extend(),a.TraiLocation=a.Location.extend(),a.Training=Elib.Model.extend({traiId:null,cvId:null,traiTitle:null,traiLevelId:null,traiSchool:null,traiLocation:null,traiStartDay:1,traiStartMonth:null,traiStartYear:null,traiEndDay:1,traiEndMonth:null,traiEndYear:null,traiOngoing:!1,traiDescription:null}),a.Training.reopen({sortTime:Ember.computed("traiOngoing","traiStartYear","traiStartMonth","traiEndYear","traiEndMonth",function(){var e=h(this,"traiOngoing"),t=e?"1":"",i=c(h(this,"traiStartYear")),n=c(h(this,"traiStartMonth")),s=e?0:c(h(this,"traiEndYear")),r=e?0:c(h(this,"traiEndMonth"));return Number(t+l(s,4)+l(i,4)+l(r)+l(n)+l(1)+l(1))})}),a.Training.primaryKey="traiId",a.Recruitment=Elib.Model.extend({cvId:null,cvCompanyName:null,cvProfessionId:null,cvTotalExperienceId:null,cvJobLevelId:null,cvSectorId:null,cvEducationLevelId:null,cvWishedSalaryId:null,cvAvailabilityId:null,cvMobilityId:null,cvProfessionalStatusId:null,cvProfessionalSituationId:null}),a.Recruitment.reopen({isValid:Ember.computed.not("isNew")}),a.Recruitment.primaryKey="cvId",a.Skill=Elib.Model.extend({skilId:null,cvId:null,skilSkillId:null,skilSkillevelId:null,displayText:null}),a.Skill.primaryKey="skilId";h=Ember.get;a.Language=Elib.Model.extend({langId:null,cvId:null,langLanguageId:null,langLanglevelId:null,displayText:null}),a.Language.primaryKey="langId",a.ApplicationRoute=Ember.Route.extend({actions:{emptyAction:function(){alert("Not yet implemented :(")},error:function(e,t,i){var n=e&&h(e,"stack");n?console.error("EXCEPTION:",n):console.error("EXCEPTION: ",e),"string"==typeof e&&(e=Elib.Error.create({message:[e]})),t=t===s||t,this.render("app-top-message",{into:"application",outlet:"topMessage",model:{isError:!0,error:e,closable:t,action:i,closeAction:"dismissMessage"}})},warn:function(e,t,i){"string"==typeof e&&(e=Elib.Error.create({isWarning:!0,message:[e]})),t=t===s||t,this.render("app-top-message",{into:"application",outlet:"topMessage",model:{isWarning:!0,warning:e,closable:t,action:i,closeAction:"dismissMessage"}})},message:function(e,t){this.render("app-top-message",{into:"application",outlet:"topMessage",model:{isMessage:!0,message:e,closable:!0,action:t,closeAction:"dismissMessage"}})},dismissMessage:function(){this.disconnectOutlet({outlet:"topMessage",parentView:"application"})},startAssistant:function(){this.assistant.set("isEnabled",!0),this.assistant.editNext()}}});h=Ember.get,m=Ember.set;a.AssistantRoute=Ember.Route.extend({beforeModel:function(){m(this,"session.assistant",!0),this.transitionTo("cvs")}});var b="cv.update",C="cv.duplicate",I="cv.create";Ember.Route.reopen({actions:{willTransition:function(){Ember.run.scheduleOnce("routerTransitions",this,function(){})}},safeTransition:function(){var e=arguments;Ember.run.scheduleOnce("afterRender",this,function(){this.transitionTo.apply(this,e)})}});var _=Ember.Mixin.create({controllerName:"cvs.cv",lookupCv:w,actions:{doneEditSection:Ember.K,editSection:Ember.K,editSectionItem:Ember.K,createNew:function(){this.controllerFor("cvs.cv").set("animateView",!1),this.transitionTo("cvs.new")},duplicate:function(){this.controllerFor("cvs.cv").set("animateView",!1),this.transitionTo("cvs.cv.duplicate",this.modelFor("cvs.cv"))},edit:function(){this.transitionTo("cvs.cv.edit",this.modelFor("cvs.cv"))}},renderTemplate:function(e,t){this.render("cvs.cv",{into:"application",outlet:"main",view:"cvs.cv",controller:e,model:t});var i=e.assistant;m(i,"model",h(t,"fillingAssistant")),this.render("assistant-block",{into:"cvs.cv",outlet:"assistant-block",controller:i}),this.render("assistant-block",{into:"cvs.cv",outlet:"assistant-block-phone",controller:i})}});a.CvsCvIndexRoute=Ember.Route.extend({activate:function(){var e=this.controllerFor("cvs.cv");this.assistant.updateIssues(),e.assistant.get("isEnabled")&&e.assistant.set("isEnabled",!1),e.endSectionEdit()}}),a.CvsCvRoute=Ember.Route.extend(_,{editDescriptor:function(){return this.controllerFor("cvs.cv")._editDescriptor},resolveCurrentView:function(){var e,t,i,n=this.editDescriptor();if(Ember.warn("can't resolve current view, tje current editDescriptor is not available",!!n),n)return t=n.model.get("id"),i=n.model.get("modelName"),(e=n.isItem&&!t?this.container.lookup("editableView:"+i+"_new"):this.container.lookup("editableView:"+i+"_"+t))&&h(e,"context.target.multiEdit")&&(e=h(e,"parentView.parentView")),e},actions:{doneEditSection:function(e,t){this.assistant.get("isEnabled")||(this.assistant.updateIssues(),this.transitionToPreview(e,t))},editSection:function(e,t){this.updateSectionRoute(e,t)},editSectionItem:function(e,t){this.updateItemRoute(e,t)}},transitionToPreview:function(e,t){var i,n=this.editDescriptor(),s=this.modelFor(this.routeName).get("id");Ember.warn("invalid call to transitionToPreview, current edit descriptor is not set",!!n),n&&(i=n.isItem?n.isNew?["cvs.cv.section",s,e]:["cvs.cv.section.item",s,h(t,"modelName"),h(n.model,"id")]:["cvs.cv.section",s,e],n.end(),this.safeTransition.apply(this,i))},updateSectionRoute:function(e,t){var i=["cvs.cv.section.edit",this.modelFor(this.routeName).get("id"),h(t,"modelName")||e];this.safeTransition.apply(this,i)},updateItemRoute:function(e,t){var i,n=h(t,"isNew");i=[this.modelFor(this.routeName).get("id"),h(t,"modelName")||e],i=[n?"cvs.cv.section.new":(i.push(h(t,"id")),"cvs.cv.section.item.edit")].concat(i),this.safeTransition.apply(this,i)},afterModel:function(e,t){this._super(e,t);var i=parseInt(h(e,"cvFillingRate")),n=h(e,"meta"),s=0<n.totalEmails&&n.totalEmails==n.totalNpai;if((i<parseInt(h(this,"session.cvRateAssistant"))||s)&!h(this,"session.firstVisit")){var r=this.assistant;Ember.run.next(this,function(){m(r,"isEnabled",!0),r.editNext()})}e||(t.abort(),this.disconnectOutlet({outlet:"main",parentView:"application"}))},model:function(t,e){var i=this;return this.store.find("cv",t.cv_id).then(function(e){if(e)return e;i.send("error",'Le cv "'+t.cv_id+'" est introuvable'),i.transitionTo("cvs.cv",i.lookupCv())})}}),a.CvsNewRoute=Ember.Route.extend(_,{setupController:function(e,t){e.assistant.set("autoValidate",!1),m(e,"model",t),m(e,"editMode",I),e._editSection("cv",t.get("id"),e,t)},model:function(){var e=this,t=this.modelFor("cvs.cv");return t||this.session.getData().then(function(){return e.lookupCv()})}}),a.CvsCvDuplicateRoute=Ember.Route.extend({controllerName:"cvs.cv",setupController:function(e,t){Ember.run.next(this,function(){e.set("editMode",C),e._editSection("cv",t.get("id"),e,t)})}}),a.CvsCvEditRoute=Ember.Route.extend({controllerName:"cvs.cv",setupController:function(e,t){Ember.run.next(this,function(){e.set("editMode",b),e._editSection("cv",t.get("id"),e,t)})}});var y=Ember.Route.extend({transitionToEditSection:function(t,i){Ember.run.next(this,function(){var e=this.controllerFor("cvs.cv");try{e.editSection(t,i)}catch(e){this.send("error",e.message),this.transitionTo("cvs.cv")}})},paramsForEdition:function(){var e={section:this.paramsFor("cvs.cv.section").section_name};return this.isNewItemRoute?e.section=this.serializer.pluralize(e.section):this.isItemRoute&&(e.section=this.serializer.pluralize(e.section),e.record=this.paramsFor("cvs.cv.section.item").record_id),e},afterModel:function(e,t){this._super(e,t);var i=this.paramsForEdition();return this.transitionToEditSection(i.section,i.record),this._super.apply(this,arguments)}});a.CvsCvSectionEditRoute=y,a.CvsCvSectionNewRoute=y.extend({isNewItemRoute:!0}),a.CvsCvSectionItemEditRoute=y.extend({isItemRoute:!0}),a.CvsCvSectionIndexRoute=Ember.Route.extend({afterModel:function(e,t){this._super(e,t);var i=this.paramsFor("cvs.cv.section").section_name,n=this.container.lookup("sectionView:"+i);this.transitionTo("cvs.cv",this.modelFor("cvs.cv").get("id")),Ember.run.scheduleOnce("afterRender",this,function(){Ember.assert("The view can't be animated",n),n.scrollToView()})}}),a.CvsCvSectionItemIndexRoute=Ember.Route.extend({afterModel:function(e,t){this._super(e,t);var i=this.paramsFor("cvs.cv.section").section_name,n=this.paramsFor("cvs.cv.section.item").record_id,s=this.container.lookup("editableView:"+i+"_"+n);this.transitionTo("cvs.cv",this.modelFor("cvs.cv").get("id")),Ember.run.scheduleOnce("afterRender",this,function(){Ember.assert("The view can't be animated",s),s.scrollToView()})}});h=Ember.get,m=Ember.set;function w(){var e=this.modelFor("cvs");return e.findBy("cvIsDefault",!0)||h(e,"firstObject")}a.CvsIndexRoute=Ember.Route.extend({lookupCv:w,redirect:function(){this.transitionTo("cvs.cv",this.lookupCv())}}),a.CvsRoute=Ember.Route.extend({activate:function(){this._super();var e=this.assistant;(h(this,"session.assistant")||h(this,"session.firstVisit"))&&Ember.run.schedule("afterRender",this,function(){m(e,"isEnabled",!0),e.editNext()})},actions:{willTransition:function(e){"cvs.cv"!==e.targetName&&this.controllerFor("cvs").set("error")}},beforeModel:function(){return h(this,"session").getData()},afterModel:function(e){"array"===Ember.typeOf(e)&&0!==e.length||this.send("error","DEBUG: La liste de cvs est vide et l'option autoCreateCv est défini à FALSE!")},model:function(){var e,t=h(this,"session.data"),i=h(t,"cvs"),n=h(this,"store");return 0===i.length&&h(this,"session.autoCreateCv")&&(e=a.Cv.create({cvTitle:"COM_CV_NEW_CV_DEFAULT_TITLE".loc()}),m(e,"recruitment.isValid",!1),m(e,"basic.isValid",!1),i.push(e),n.add(e)),m(t,"cvs",i),i}});h=Ember.get,m=Ember.set;a.FirstVisitRoute=Ember.Route.extend({beforeModel:function(){this.session.set("firstVisit",!0),this.assistant.set("autoValidate",!1),this.transitionTo("cvs")}}),Ember.View.reopen({defaultAnimation:null,animate:function(e,t){if("inDOM"===this._state){var i=this.$();if(e=e||this.defaultAnimation)return i.effect(e,t)}}}),a.CvsCvView=Ember.View.extend({templateName:"cvs/cv",classNames:["spaced-top"],cvModelWillChange:function(){return this.get("controller.animateView")&&$("section:not(.cv-toolbar)").effect("zoomOut","x3"),null}.observes("controller.selectedCv")}),Elib.EditableView.reopen({assistant:Ember.computed(function(){return h(this,"container").lookup("assistant:main")}),switchEditing:function(){if(h(this,"isEditing")){var e=h(this,"assistant"),t=h(this,"controller");h(e,"isEnabled");h(e,"isEnabled")&&h(e,"autoValidate")&&"function"==typeof t.validate&&Ember.run.scheduleOnce("afterRender",t,function(){Ember.run.later(this,"validate",200)})}}.observes("isEditing"),contextDidChange:function(){this.lastRegisteredName&&this.container.unregister(this.lastRegisteredName);var e,t=h(this,"context"),i=h(t,"modelName"),n=h(t,"id"),s=h(t,"isNew");i&&(e=s?"editableView:"+i+"_new":"editableView:"+i+"_"+n,this.lastRegisteredName=e,this.container.has(e)&&this.container.unregister(e),this.container.register(e,this,{singleton:!0,instantiate:!1}))}.observes("context.modelName","context.id").on("init"),autoToggleDetails:function(){if(h(this,"isEditing")){var e=h(this,"assistant"),t=h(this,"controller");if(h(e,"isEnabled"))"warning"==h(e,"current.issue.type")&&m(t,"toggleDetails",!0)}}.observes("isEditing")});var S=Ember.computed;function T(){var e,t,i,n,s,r,o=this._view,a=this.helpView,l=o.$();l&&o&&a&&(e=(l=o.$()).outerHeight(),t=a.outerHeight(),s=(i=l.offset().top)+e,r=(n=$(window).scrollTop()+20)+t,e<t?a.css({position:"absolute",top:i}):s<=r?a.css({position:"absolute",top:s-a.outerHeight()}):n<i?a.css({position:"absolute",top:i}):a.css({position:"fixed",top:20}))}a.OverlayView=Ember.View.extend({modalOverlaySelector:"body",templateName:"assistant_view",classNameBindings:["modalOverlayClassName"],controller:Ember.computed.alias("assistant"),context:Ember.computed.alias("controller"),assistant:Ember.computed(function(e,t){return 1<arguments.length?t:h(this,"container").lookup("assistant:main")}),session:Ember.computed(function(){return h(this,"container").lookup("session:main")}),modalOverlayClassName:"e-overlay e-overlay-b",modalTarget:S("modalOverlaySelector",function(){var e=h(this,"modalOverlaySelector"),t=$(e);return Ember.assert("Can't apply the overlay for the element specified by \""+e+'" selector',t.get(0)),t}),texts:S("identifier",function(){var e=h(this,"identifier");if(e)return h(this,"session.assistantTexts."+e+"Texts")}),enableRecurseTab:function(){if(this._view){var i=this._view.$();i.on("focusout",":tabbable",s);var e=h(this,"identifier"),t=i.find(":input:focusable").first();if(t.focus(),"recruitment"==e){var n=t.parents(".ember-wrapped-widget").find("input.ember-text-field").first().data("widgetInstance");setTimeout(function(){n._onWidgetClick()},20)}this.one("hidemodal",this,function(){i.off("focusout",":tabbable",s)})}function s(){var e=i.find(":tabbable"),t=e.length-1;e.index(this)==t&&e.find(":input").first().focus()}},insertShadowView:function(){Ember.assert("You must pass a view that is in DOM to insertShadowView",this._view&&"inDOM"===this._view._state);var e=this._view,t=e.$(),i=h(e,"tagName"),n=$("<"+i+">"),s=t.offset();(this._substituteView=n).attr("class",t.attr("class")),n.addClass("substitute-view"),e.on("resize",this,this.syncModalSize),n.insertBefore(t),t.css({marginTop:0,marginBottom:0,position:"absolute",zIndex:1e3,width:t.width(),top:s.top})},removeShadowView:function(){if(this._substituteView&&this._view){var e=this._view,t=e.$();t&&t.get(0).removeAttribute("style"),this._substituteView.remove(),this._substituteView=null,this._view=null,e.off("resize")}},syncModalSize:function(){var e=this._view&&this._view.$();this._substituteView&&e&&this._substituteView.height(e.height())},show:function(e,t){var i=this,n=h(this,"modalTarget"),s=e.$().offset().top;m(this,"identifier",t),this._view=e,this._oldTargetPosition=n.get(0).style.position,n.css({position:"relative"}),"inDOM"!==this._state?(this.appendTo(n),this.one("didInsertElement",this,function(){this._super.apply(this,arguments),this.helpView=this.$(".assistant-help"),this.helpViewWidth=this.$(".assistant-help-container").width(),this.helpView.width(this.helpViewWidth),this.helpView.css({top:s,position:"absolute"}),this.helpView.effect("bounceInRight","3x")})):Ember.run.scheduleOnce("afterRender",this,function(){this.helpView=this.$(".assistant-help"),this.helpView.width(this.helpViewWidth),this.helpView.css({top:s,position:"absolute"}),this.helpView.effect("bounceInRight","3x")}),this.insertShadowView(),this.constrainHandler||(this.constrainHandler=Ember.run.bind(this,T)),Ember.run.scheduleOnce("afterRender",this,function(){this.enableRecurseTab(),e.immediateScrollToView(),e.animate("zoomIn","x3").then(function(){$(window).on("scroll",i.constrainHandler),i._watchingScroll=!0})}),this.trigger("showmodal",e)},hide:function(){m(this,"identifier"),this._view&&this.trigger("hidemodal",this._view),this.removeShadowView(),this._watchingScroll&&$(window).off("scroll",this.constrainHandler),this.remove()},remove:function(){h(this,"assistant.nextIssue")||(this._super(),delete this.helpView,h(this,"modalTarget").css({position:this._oldTargetPosition}))}.observes("assistant.isEnabled")}),Ember.onLoad("Ember.Application",function(e){e.initializer({name:"initOverlayView",initialize:function(e,t){t.register("modalView:main",a.OverlayView,{singleton:!0}),t.inject("view","modalView","modalView:main"),t.inject("component","modalView","modalView:main")}})}),a.EditableListController=Ember.ArrayController.extend(Elib.EditableListControllerMixin,{showHeader:!0,showFooter:!0,actions:{addEntry:function(){return this.send("editing",{isNew:!0,modelName:this.get("itemClass").getName()})},removeEntry:function(e){this._super.call(this,e),this.send("doneEditing",e.get("content"))}}}),a.EditableViewController=Ember.ObjectController.extend(Ember.Evented,Elib.EditableControllerMixin,Elib.FormValidationMixin,a.FormTrackingMixin,{showHeader:!0,showFooter:!0,didHitSave:null,autoSwitchOnSave:!1,invalidEntries:null,showError:Ember.computed("error","didHitSave",function(){return!(!h(this,"error")||!h(this,"didHitSave"))}),showErrorDidChange:Ember.observer("showError",function(){h(this,"showError")&&Ember.run.scheduleOnce("afterRender",this,this.scrollToError)}),scrollToError:function(){var e=$(".editable-container .alert");$("html, body").animate({scrollTop:e.offset().top-100})},deletable:Ember.computed("assistant.isEnabled","target.length","target.isList","isNew",function(){return!(h(this,"isNew")||h(this,"assistant.isEnabled")||h(this,"target.length")<2||!h(this,"target.isList"))}),revertChanges:function(){m(this,"assistant.isEnabled",!1),this._super()},_didRemove:function(){var e=this.target,t=this.get("assistant"),i=h(t,"isEnabled");e.send.call(e,"removeEntry",this),this.send("doneEditing",h(this,"model")),i&&t.editNext()},didSaveModel:function(){var e=this.get("assistant");h(this,"multiEdit")?this.send("saveSuccess"):(this.continueAssistant?Ember.run.scheduleOnce("afterRender",e,e.editNext):e.set("isEnabled",!1),this.send("doneEditing",h(this,"model")))}.on("saveSuccess"),actions:{edit:function(){this.send("editing",h(this,"model"))},cancel:function(){this.revertChanges(),this.send("doneEditing",h(this,"model"))},next:function(){var e=h(this,"saveAction");m(this,"didHitSave",!0),this.continueAssistant=!0,this.send(e)},done:function(){var e=h(this,"saveAction");m(this,"didHitSave",!0),this.continueAssistant=!1,this.send(e)}}}),a.ApplicationController=Ember.ObjectController.extend({});var N=Elib.mysqlDate("2015-02-17 09:29:00").getTime();function A(e){return Ember.computed("details",function(){return(h(this,"details")||[]).filterBy(e)})}a.AssistantBlockController=Ember.ObjectController.extend(a.ToggleDetailsMixin,{needs:["cvs","cvsCv","application"],notifiedIds:Ember.computed.instance([]),INCOMPLETE_CV_MESSAGE:"INCOMPLETE_CV_TEXT_FIRST_TIME",cvDidChange:Ember.observer("details.[]",function(){this._seen=this._seen||[];var e=h(this,"controllers.application"),t=h(this,"controllers.cvsCv.cvModified"),i=h(this,"controllers.cvsCv.cvCreated"),n=Elib.mysqlDate(h(this,"serverDateTime")),s=Number(this.get("currentId")),r=!!this.get("errors.length")&&function(e,t){var i=e&&e.getTime(),n=t&&t.getTime();return!(i&&N<i)&&!(n&&N<n)}(i,t),o=Number(h(this,"totalRate"));this._seen.slice(-1)[0];var a=function(e,t){return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDay()==e.getDay()}(t,n);if(this._seen.contains(s)||this._seen.push(s),!r)return!a&&o<70?e.send("warn","INCOMPLETE_CV_TEXT_MESSAGE",!0,"startAssistant"):e.send("dismissMessage");(1<this._seen.length||this._seen[0]!==s)&&(this.INCOMPLETE_CV_MESSAGE="INCOMPLETE_CV_TEXT"),e.send("warn",this.INCOMPLETE_CV_MESSAGE,!0,"startAssistant")}),current:null,isLoading:null,done:null,pending:null,totalIssues:null,forceAssistant:!1,autoValidate:!0,issuesSortOrder:["type:desc","rate:desc"],session:Ember.computed.alias("controllers.cvs.session"),serverDateTime:Ember.computed.alias("session.serverDateTime"),isEnabled:function(e,t,i){return!1}.property(),nextIssue:Ember.computed("current",function(){var e=h(this,"pending"),t=h(this,"current.issue");if(e&&t&&!(e.length<2))return 0===e.indexOf(t)?e[1]:e[0]}),currentStep:Ember.computed("done.length",function(){var e=h(this,"done.length");if(e!==s)return e+1}),progress:Ember.computed("done.length","pending.length",function(){var e=h(this,"totalIssues"),t=h(this,"currentStep");if(e&&!(e<2))return Math.round(t/e*100)}),errors:A("isError"),warnings:A("isWarning"),dedupIssues:Ember.computed("issues.[]",function(){var e=h(this,"issues"),s={},r=[];if(e)return e.forEach(function(e){var t,i=h(e,"section"),n=s[i];if(n)return n.count+=1,void(n.showCount=!0);t=Number(h(e,"rate")),n={rate:t=isNaN(t)?0:t,rateWidth:t&&(10<=t?t:10),count:1,issue:e},s[i]=n,r.push(n)}),r}),issues:Ember.computed("details",function(){var e=h(this,"issuesSortOrder")||[],t=h(this,"details");return t&&2<t.length&&(t=t.sortBy.apply(t,e)),t}),server:Ember.computed(function(){return h(this,"container").lookup("server:main")}),currentId:Ember.computed("controllers.cvsCv.cvId",function(){return h(this,"controllers.cvsCv.cvId")}),edit:function(e){var t=h(this,"currentId"),i=h(e,"section"),n=h(e,"recordId"),s=h(this,"controllers.cvsCv"),r=function(e,t,i){var n,s=o[t];return!s.multiple||s.multiEdit?!(n=[s.route,e])!==s.submitSection&&n.push(t):n=i?[s.route,e,s.singleName||t,i]:[s.newRoute,e,s.singleName||t],n}(t,i,n);m(this,"current",{issue:e}),m(this,"isEnabled",!0),s.transitionToRoute.apply(s,r)},editNext:function(){if(h(this,"isEnabled")){var e=h(this,"current.issue");if(!e)return this.edit(h(this,"pending.firstObject"));var t=h(this,"pending"),i=h(this,"nextIssue"),n=h(this,"done");t.removeObject(e),n.addObject(e),i?this.edit(i):m(this,"isEnabled"),this.updateIssues()}},updateIssues:function(){if(this._reqPromise)return this._reqPromise;var t=this;return m(this,"isLoading",!0),this._reqPromise=h(this,"server").getJSON({task:"cv.rating",cvId:h(this,"currentId")}).then(function(e){h(t,"model").apply(e),t._reqPromise=null,m(t,"isLoading")},function(){t._reqPromise=null,m(t,"isLoading")}),this._reqPromise},controllerForSection:function(e,t){return h(this,"controllers.cvsCv").controllerForSection(e,t)},minProgress:15,minRate:Ember.computed.oneWay("minProgress"),labelOut:function(){var e=h(this,"totalRate"),t=h(this,"minRate")||0;return!e||e<=t}.property("totalRate"),showProgress:Ember.computed.and("current","progress"),progressStyle:function(){var e=h(this,"progress"),t=h(this,"minProgress")||0;if(e!==s&&null!==e)return e<=t?"width: "+t+"%;":"width: "+e+"%"}.property("progress"),fillingColor:function(){var e=Number(h(this,"totalRate"));return 100<=e?"bar-success":75<e?"bar-warning":"bar-danger"}.property("totalRate"),actions:{showExtraRate:function(e){m(this,"hoveredIssue",e)},hideExtraRate:function(){m(this,"hoveredIssue",{rate:0,rateWidth:0})},editSection:function(e){this.edit(e)}}}),Ember.onLoad("Ember.Application",function(e){e.initializer({name:"AssistantBlockController",initialize:function(e,t){t.register("assistant:main",a.AssistantBlockController,{singleton:!0}),e.lookup("assistant:main"),t.inject("controller","assistant","assistant:main"),t.inject("route","assistant","assistant:main"),t.inject("view","assistant","assistant:main")}})});h=Ember.get,m=Ember.s;function L(e){return(e=parseInt(e,10))<10?"0"+e:e}function D(i,n,s){return function(){var e=h(this,i),t=h(this,n);return e.filter(function(e){return!t.anyBy(s,h(e,s))})}.property(i+".@each",n+".@each")}a.BasicSectionController=a.EditableViewController.extend(a.ToggleDetailsMixin,a.CvFormsMixin,{needs:["cvsCv"],isDirty:!0,editingPhone:null,phoneSaveError:null,editingEmail:null,emailSaveError:null,editingLinks:null,userLinks:null,cvTitle:Ember.computed.oneWay("controllers.cvsCv.content.cvTitle"),cvCompanyName:Ember.computed.oneWay("controllers.cvsCv.content.recruitment.cvCompanyName"),userLocationUrl:Ember.computed.alias("session.data.config.userLocationUrl"),userEmails:Ember.computed.alias("session.userEmails"),userPhones:Ember.computed.alias("session.userPhones"),filtredPhones:D("userPhones","cvPhones","phone"),filtredEmails:D("userEmails","cvEmails","email"),selectedPhoneDidChange:function(){var e=h(this,"selectedPhone");e&&this.send("addPhone",null,e)}.observes("selectedPhone"),selectedEmailDidChange:function(){var e=h(this,"selectedEmail");e&&this.send("addEmail",null,e)}.observes("selectedEmail"),userGenderIdObserver:function(){"1"===h(this,"userGenderId")&&m(this,"cvNoMilitaryDuty")}.observes("userGenderId"),askForMD:function(){return"0"===h(this,"userGenderId")}.property("userGenderId"),birthday:function(e,t){var i,n,s,r,o=t;if(1===arguments.length){if(n=h(this,"birthdayDay"),s=h(this,"birthdayYear"),r=h(this,"birthdayMonth"),Ember.isEmpty(n)||Ember.isEmpty(s)||Ember.isEmpty(r))return null;o=s+"-"+L(r)+"-"+L(n)}else Ember.isEmpty(t)||(n=(i=t.split("-"))[2],s=i[0],r=i[1],m(this,"birthdayDay",n||null),m(this,"birthdayMonth",parseInt(r,10).toString()),m(this,"birthdayYear",s||null));return o}.property("birthdayDay","birthdayMonth","birthdayYear"),facebook:Ember.computed.alias("userLinks.facebook.url"),twitter:Ember.computed.alias("userLinks.twitter.url"),googlePlus:Ember.computed.alias("userLinks.googlePlus.url"),linkedin:Ember.computed.alias("userLinks.linkedin.url"),skype:Ember.computed.alias("userLinks.skype.url"),rss:Ember.computed.alias("userLinks.rss.url"),website:Ember.computed.alias("userLinks.website.url"),socialLinks:function(){var t=h(this,"userLinks");return t.getAttributes().map(function(e){return h(t,e)})}.property("userLinks"),init:function(){var e;this._super(),e=a.UserLinks.create(),this.set("userLinks",e),Ember.bind(this,"birthday","userBirthday"),Ember.bind(this,"facebook","cvFacebook"),Ember.bind(this,"twitter","cvTwitter"),Ember.bind(this,"googlePlus","cvGooglePlus"),Ember.bind(this,"linkedin","cvLinkedin"),Ember.bind(this,"skype","cvSkype"),Ember.bind(this,"rss","cvRss"),Ember.bind(this,"website","cvWebsite"),this.set("editingLinks",h(this,"socialLinks").filterBy("isValid")),this.send("registerInput",function(t,i,n){return{validate:function(){var e=h(t,i);return m(t,i+"Invalid",!1),(n?e&&!!e.length:null!==e&&e!==s)?Ember.RSVP.Promise.resolve():(m(t,i+"Invalid",!0),Ember.RSVP.Promise.reject())}}}(this,"userGenderId"))},initSocialEditing:Ember.observer("isEditing",function(){var e;h(this,"isEditing")&&(e=h(this,"socialLinks").filterBy("url"),this.set("editingLinks",e))}),insertedSocialInput:function(){h(this,"displayUrl")?this.set("isNew",!1):this.set("isNew",!0)},saveLink:function(e){var t=this,i=t.get("isNew"),n=this.get("parentView.controller"),s=h(t,"link"),r=h(t,"linkShadow"),o=h(s,"error"),a=e&&"keypress"===e.type,l=a&&13===e.which;if(a&&!l)return r=r||s.copy(),m(t,"linkShadow",r),void(o&&m(s,"error"));var c=h(n,"server"),u=h(n,"editingLinks"),d=Ember.merge({task:"link.validate"},n.get("params"));return h(s,"isValid")?(d.jform[s.get("modelName")]=s.get("displayUrl"),setTimeout(function(){s._isRemoving||c.saveJSON(d).then(function(){t.set("linkShadow",null),t.set("isNew",!1)},function(e){m(s,"error",e)})},500)):l?m(s,"error","L'url ne doit pas être vide"):i?(s.set("url",null),u.removeObject(s)):s.merge(t.get("linkShadow")),!1},actions:{addedEmail:function(e){h(this,"userEmails").pushObject(e)},addedPhone:function(e){h(this,"userPhones").pushObject(e)},addSocial:function(e){var t,i=h(this,"editingLinks"),n=h(i,"length");return i.contains(e)||(e._isRemoving=!1,t=n<(t=h(this,"socialLinks").indexOf(e))?n:t,i.insertAt(t,e)),!1},removeLink:function(e){this.set(e.get("modelName")),e._isRemoving=!0,h(this,"editingLinks").removeObject(e)}}}),a.BasicSectionController.reopen({didSaveModel:function(){this._super(),m(this,"cvPhoto.isDirty",!1)},cacheBuster:function(){return h(this,"cvPhoto.isDirty")||(this._lastCacheBuster=(new Date).getTime()),this._lastCacheBuster}.property("cvPhoto.isDirty"),uploadUrl:Ember.computed.alias("session.data.config.attachmentUploadUrl"),downloadUrl:Ember.computed.alias("session.data.config.attachmentDownloadUrl"),downloadParam:Ember.computed.alias("session.data.config.attachmentDownloadParam"),cvPhotoHeight:Ember.computed.alias("session.data.config.cvPhotoHeight"),cvPhotoWidth:Ember.computed.alias("session.data.config.cvPhotoWidth"),cvPhotoUrl:Ember.computed("cacheBuster","downloadUrl",function(){var e=h(this,"cvPhoto.attachmentId"),t=h(this,"downloadParam"),i=h(this,"cacheBuster"),n=h(this,"downloadUrl");return t=t&&"&"+t+"="||"",i=i&&"&cb="+i||"",e&&n?n+t+e+i:""})}),a.CvsController=Ember.ArrayController.extend(a.ToggleDetailsMixin,{toggleDetails:!0,contentChange:function(){var e=(h(this,"content")||[]).map(function(e){return Number(h(e,"cvId"))});m(this,"ids",e)}.observes("content").on("init")});var V=Elib.Model.extend({cvId:null,cvTitle:null,cvLangId:Ember.computed.defaultTo("defaultCvLang"),cvStatusId:Ember.computed.defaultTo("defaultCvStatus"),cvIsDefault:null,attachments:null});V.reopen({currentCv:null,init:function(){for(var e=this.getAttributes(),t=0;t<e.length;t++)Ember.bind(this,e[t],"currentCv."+e[t]);Ember.bind(this,"isDirty","currentCv.isDirty"),this._super()},statusDescription:Ember.computed("cvStatusId",function(){var e=h(this,"cvStatusId");return"96"===e?"CV_STATUS_ENABLED_DESC":"97"===e?"CV_STATUS_CONFIDENTIAL_DESC":"183"===e?"CV_STATUS_DISABLED_DESC":""}),defaultCvStatus:Ember.computed.alias("session.defaultCvStatus"),defaultCvLang:Ember.computed.alias("session.defaultCvLang"),session:Ember.computed(function(){return this.container.lookup("session:main")})}),a.CvsCvController=Ember.ObjectController.extend(Elib.FormValidationMixin,{needs:["cvs"],onModelChange:function(){h(this,"content")&&("1"===h(this,"cvStatusId")&&m(this,"cvStatusId","96"),"1"===h(this,"cvLangId")&&m(this,"cvLangId","103"))}.observes("content"),firstVisit:Ember.computed.alias("session.firstVisit"),uploadUrl:Ember.computed.alias("session.data.config.attachmentUploadUrl"),disableSubmit:Ember.computed("editModel.isDirty","isLoading",function(){return h(this,"isLoading")||!h(this,"editModel.isDirty")}),canBypassAssistant:!1,canAbort:Ember.computed("cvsList[]","editModel","content",function(){var e=h(this,"cvsList"),t=e.length;return 1<t||(1===t?h(this,"editMode")!==b||!!e.get("firstObject.cvTitle"):void 0)}),animateView:!0,canGoNext:Ember.computed("editMode",function(){var e=h(this,"editMode");return e===b?h(this.assistant,"isEnabled")&&!!h(this.assistant,"nextIssue"):e!==C||!!h(this.assistant,"issues.length")}),selectedCv:Ember.computed.oneWay("content"),cvsList:Ember.computed.alias("controllers.cvs.content"),cvDownloadUrl:Ember.computed.alias("session.data.config.cvDownloadUrl"),cvLink:Ember.computed("content.cvId",function(){return h(this,"cvDownloadUrl")+"&id="+h(this,"content.cvId")}),defaultCvIconTooltip:function(){return h(this,"cvIsDefault")?"CV_ACTION_IS_DEFAULT_TEXT":"CV_ACTION_SET_AS_DEFAULT_TEXT"}.property("cvIsDefault"),createModeDidChange:function(){m(this,"isEditing",!!h(this,"editMode"))}.observes("editMode"),error:null,editMode:null,editingTitle:Ember.computed("editMode",function(){var e=h(this,"editMode");return"string"==typeof e?e.replace(".","_").toUpperCase()+"_TITLE":""}),isEditing:null,isLoading:null,settingAsDefault:null,creatingOverlayedSelector:".editable-container, .assistant",defaultCvStatus:Ember.computed.alias("session.defaultCvStatus"),defaultCvLang:Ember.computed.alias("session.defaultCvLang"),editModel:Ember.computed("editMode",function(){var e,t=this.getProperties(["cvId","cvTitle","cvIsDefault","cvLangId","cvStatusId","defaultCvLang","defaultCvStatus","attachments"]),i=h(this,"editMode");return i?(e=V.create(),i===b?m(e,"currentCv",h(this,"model")):i===C?e.setProperties({cvId:t.cvId,cvTitle:t.cvTitle,cvIsDefault:t.cvIsDefault,cvLangId:t.cvLangId,cvStatusId:t.cvStatusId,attachments:t.attachments}):e.setProperties({cvLangId:t.defaultCvLang,cvStatusId:t.defaultCvStatus}),e):(m(this,"firstVisit"),this)}),saveText:"COM_CV_SAVE_ITEM",saveAction:"done",rerouteToCv:function(e){e=e||h(this,"content"),this.transitionToRoute("cvs.cv",e)},save:function(){var s=this,r=h(this,"editModel"),e=h(this,"session.token"),o=h(this,"editMode"),t=h(this,"server"),i={task:o,jform:r.getValues()};i[e]=1,m(this,"isLoading",!0),t.saveJSON(i).then(function(e){var t=h(s,"assistant"),i=h(s,"canGoNext");if(o!==b){var n=e.get("cv");h(s,"cvsList").pushObject(n),m(s,"selectedCv",n),s.send("switchCV",n)}else m(r,"isDirty",!1);m(s,"editMode"),m(s,"isLoading"),i?Ember.run.next(t,function(){m(this,"isEnabled",!0),Ember.run.later(this,this.editNext,500)}):s.rerouteToCv()}).catch(function(e){m(s,"isLoading"),m(s,"error",e)})},stopEditing:function(){m(this,"editMode"),m(this,"error"),h(this,"model").reset()},actions:{switchCV:function(e){this.set("animateView",!0),this.rerouteToCv(e)},setAsDefault:function(){if(!h(this,"cvIsDefault")&&!h(this,"settingAsDefault")){var t=this,e=h(this,"cvId"),i=h(this,"server");m(this,"settingAsDefault",!0),i.saveJSON({task:"cv.setDefault",cvId:e}).then(function(){var e=h(t,"content");h(t,"cvsList").forEach(function(e){m(e,"cvIsDefault",!1)}),m(e,"cvIsDefault",!0),m(t,"settingAsDefault")}).catch(function(){m(t,"settingAsDefault")})}},next:function(){this.send("done")},done:function(){var e=this;this.validate().then(function(){e.save()})},cancel:function(){m(this,"assistant.isEnabled",!1),this.stopEditing(),this.rerouteToCv()}},_editDescriptor:null,controllerForSection:function(e,t){if("cv"===e)return this;var i,n=t?e+"_"+t:e;return this._controllerLookupCache=this._controllerLookupCache||{},(i=this._controllerLookupCache[n])?i:(i=this.container.lookup("containerController:"+e),Ember.assert("The controller for section `"+e+"` could not be found",i),Ember.isArray(i)&&t&&(i=this.container.lookup("itemController:"+e+t),Ember.assert("The controller for the item with the id <"+t+"> in section <"+e+"> could not be found",i)),this._controllerLookupCache[n]=i)},endSectionEdit:function(){var e=this._editDescriptor;return e&&e.end()},editSection:function(e,t){var i=this.controllerForSection(e,t),n=h(i,"model");return this._editDescriptor&&i===this._editDescriptor.controller?Ember.RSVP.Promise.resolve(this._editDescriptor):(this.endSectionEdit(),this._editSection(e,t,i,n))},_editSection:function(e,t,i,n){var s=this;n=n||h(i,"model");var r={section:e,recordId:t||n.get("id"),containerController:null,controller:i,model:n,isItem:!1,isNew:!1,ended:!1,end:function(){return!!this.ended||("cv"===e?this.controller.stopEditing():this.controller.set("isEditing",!1),this.ended=!0,!(s._editDescriptor=null))}};return Ember.isArray(i)&&!h(i,"multiEdit")&&(r.isNew=!0,r.isItem=!0,r.model=i.addItem(),r.containerController=i,r.controller=this.container.lookup("itemController:"+e+"New"),i=r.controller),m(i,"isEditing",!0),this._editDescriptor=r,this.runPromise=new Ember.RSVP.Promise(function(e,t){Ember.run.scheduleOnce("render",this,function(){e(r)})})},attachmentName:Ember.computed.oneWay("attachments.firstObject.attachmentOriginalName"),downloadUrl:Ember.computed.alias("session.data.config.attachmentDownloadUrl"),downloadParam:Ember.computed.alias("session.data.config.attachmentDownloadParam"),attachmentUrl:Ember.computed("attachments.firstObject.attachmentId","downloadUrl",function(){var e=h(this,"attachments.firstObject.attachmentId"),t=h(this,"downloadParam"),i=h(this,"downloadUrl");return t=t&&"&"+t+"="||"",e&&i?i+t+e:""})}),a.ExperienceController=a.EditableViewController.extend(a.ToggleDetailsMixin,a.CvFormsMixin,{isStartYearRequired:Ember.computed.bool("expeStartMonth"),isEndDateRequired:Ember.computed.bool("expeStartMonth"),selectedLocation:null,selectedCompany:null,locationAutoFilled:null,companySizeAutoFilled:null,selectedLocationDidChange:function(){m(this,"locationAutoFilled",!1)}.observes("selectedLocation"),didSelectCompanySize:function(){m(this,"parentView.controller.companySizeAutoFilled",!1)},selectedCompanyDidChange:function(){var e,t,i=h(this,"selectedCompany");i&&(e=h(i,"sector_id"),t=h(i,"type_id"),!h(this,"locationAutoFilled")&&h(this,"expeLocation.id")||(m(this,"locationAutoFilled",!0),m(this,"expeLocation.id",h(i,"location.id")),m(this,"expeLocation.displayText",h(i,"location.txt"))),!h(this,"companySizeAutoFilled")&&h(this,"expeCompany.sizeId")||(m(this,"companySizeAutoFilled",!0),m(this,"expeCompany.sizeId",h(i,"size_id"))),m(this,"expeCompany.typeId",t),m(this,"expeCompany.sectorId",e))}.observes("selectedCompany"),didSaveModel:function(){m(this,"locationAutoFilled",null),m(this,"companySizeAutoFilled",null),h(this,"target").sortByDate(),this._super()},lookDataSource:function(e,t){var i=this.dataSourceManager.dataSourceEntry(e,t,"id");return i&&h(i,"label")},dateDisplay:Ember.computed("expeIsCurrent","expeStartMonth","expeStartYear","expeEndYear","expeEndMonth",function(e){var t=h(this,"expeStartYear"),i=this.lookDataSource("month",h(this,"expeStartMonth")),n=h(this,"expeEndYear"),s=this.lookDataSource("month",h(this,"expeEndMonth"));return t?h(this,"expeIsCurrent")?Ember.String.loc("DATE_ONGOING",[i,t]):Ember.String.loc("DATE_FINISHED",[i,t,s,n]):"DATE_UNDEFINED".loc()})}),a.ExperiencesController=a.EditableListController.extend({addButtonLabel:"ADD_NEW_EXPERIENCE_LABEL",sortByDate:function(){Ember.run(this,function(){this.propertyWillChange("content"),m(this,"content",this.sortBy("sortTime").reverse()),this.propertyDidChange("content")})}});h=Ember.get,m=Ember.set;a.LanguageController=a.EditableViewController.extend(a.TagControllerMixin,a.CvFormsMixin,{modelIdBinding:"langId",multiEdit:!0,levelIdKey:"langLanglevelId"}),a.LanguagesController=a.EditableListController.extend(a.TagsControllerMixin,{forceSelection:!0,addButtonLabel:"ADD_LANGUAGES_LABEL",dataSourceName:"lang",prompt:"Sélectionnez une langue",valueKeyName:"langLanguageId",ranksListName:"langLevel"});var x=[10,20,70,95];a.LoadingController=Ember.Controller.extend({progress:0,progressMessage:"",loadingStep:Ember.computed.alias("session.loadingStep"),updateProgress:function(){var e=h(this,"loadingStep"),t=h(Ember.STRINGS,"PROGRESS_LOADING"+e)||"";m(this,"progressMessage",t.loc()),m(this,"progress","width: "+x[e]+"%")},loadingStepChange:function(){Ember.run.once(this,this.updateProgress)}.observes("loadingStep").on("init")}),a.RecruitmentController=a.EditableViewController.extend(a.ToggleDetailsMixin,a.CvFormsMixin);h=Ember.get,m=Ember.set;a.SkillController=a.EditableViewController.extend(a.TagControllerMixin,a.CvFormsMixin,{modelIdBinding:"skilId",multiEdit:!0,levelIdKey:"skilSkillevelId"}),a.SkillsController=a.EditableListController.extend(a.TagsControllerMixin,{forceSelection:!1,addButtonLabel:"ADD_SKILLS_LABEL",dataSourceName:"skill",prompt:"Saisissez une compétence",valueKeyName:"skilSkillId",ranksListName:"skillLevel"}),a.TrainingController=a.EditableViewController.extend(a.ToggleDetailsMixin,a.CvFormsMixin,{isStartYearRequired:Ember.computed.bool("traiStartMonth"),isEndDateRequired:Ember.computed.bool("traiStartMonth"),selectedSchool:null,locationAutoFilled:null,selectedLocationDidChange:function(){m(this,"locationAutoFilled",!1)}.observes("selectedLocation"),selectedCompanyDidChange:function(){var e=h(this,"selectedSchool");if(e){var t=h(e,"type_id")||h(this,"traiSchool.schoolTypeId");!h(this,"locationAutoFilled")&&h(this,"traiLocation.id")||(m(this,"locationAutoFilled",!0),m(this,"traiLocation.id",h(e,"location.id")),m(this,"traiLocation.displayText",h(e,"location.txt"))),m(this,"traiSchool.schoolTypeId",t)}}.observes("selectedSchool"),didSaveModel:function(){m(this,"locationAutoFilled",null),h(this,"target").sortByDate(),this._super()},lookDataSource:function(e,t){var i=this.dataSourceManager.dataSourceEntry(e,t,"id");return i&&h(i,"label")},dateDisplay:Ember.computed("traiOngoing","traiStartMonth","traiStartYear","traiEndYear","traiEndMonth",function(e){var t=h(this,"traiStartYear"),i=this.lookDataSource("month",h(this,"traiStartMonth")),n=h(this,"traiEndYear"),s=this.lookDataSource("month",h(this,"traiEndMonth"));return t?h(this,"traiOngoing")?Ember.String.loc("DATE_ONGOING",[i,t]):Ember.String.loc("DATE_FINISHED",[i,t,s,n]):"DATE_UNDEFINED".loc()})}),a.TrainingsController=a.EditableListController.extend({addButtonLabel:"ADD_NEW_TRAINING_LABEL",sortByDate:function(){Ember.run(this,function(){this.propertyWillChange("content"),m(this,"content",this.sortBy("sortTime").reverse()),this.propertyDidChange("content")})}}),a.CvAddButtonComponent=Ember.Component.extend({action:"addEntry",label:"COM_CV_ADD",classNames:["cv-add-button"],classNameBindings:["isEnabled:active"],isEnabled:!0,actions:{click:function(){this.sendAction()}}}),a.CvAttachmentsComponent=Ember.Component.extend({displayText:function(){var e=h(this,e);return e.replace(/^(.*?)\//,"")}.property("url")}),a.CvCloseButtonComponent=Ember.Component.extend({action:"cancel",label:"COM_CV_CANCEL",classNames:["cv-close-button"],actions:{click:function(){this.sendAction()}}}),a.CvDeleteButtonComponent=Ember.Component.extend({action:"removeEntry",label:"COM_CV_ACTIONS_DELETE",classNames:["cv-delete-button"],actions:{click:function(){this.sendAction()}}}),a.CvEditButtonComponent=Ember.Component.extend({action:"edit",label:"COM_CV_EDIT",classNames:["cv-edit-button"],classNameBindings:["isEnabled:active"],isEnabled:!0,actions:{click:function(){this.sendAction()}}}),a.CvSelectorComponent=Ember.Component.extend({classNames:["cv-selector"],selectionDidChange:function(){var e=h(this,"selection");if(e)return this.$(".e-input input").trigger("mouseleave").trigger("focusout"),this.sendAction("action",e)}.observes("value")});h=Ember.get,m=Ember.set;a.EAlertComponent=Ember.Component.extend({actions:{doAction:function(){this.triggerAction()},close:function(){var e=h(this,"closeAction");this.set("isVisible",!1),e&&this.triggerAction({action:e})}},classNames:["alert"],classNameBindings:["type"],closable:!0,closeAction:null,error:null,action:null,actionText:"CANCEL",closeIcon:function(){return"CLOSE_ICON".loc()}.property(),icon:function(){return(h(this,"type").toUpperCase()+"_ICON").loc()}.property("type"),type:function(e){var t="success",i=h(this,"error");return i&&i.isError&&(t="error"),i&&i.isWarning&&(t="warning"),t}.property("error","message"),message:function(e,t){if(t=t||"UNKNOWN_ERROR",1<arguments.length){if("UNKNOWN_ERROR"===t)return t;t&&t.isError&&m(this,"type","warning")}else t=h(this,"error");return t&&(t.isError||t.isWarning)&&(t=h(t,"message"),Ember.isArray(t)&&(t=t.join("<br>"))),"string"!=typeof t&&(t="UNKNOWN_ERROR"),t&&t.loc()}.property("error"),didCloseAlert:Ember.K});h=Ember.get;a.EButtonComponent=Elib.EButtonComponent.extend({classNameBindings:["colorCls"],color:null,baseCls:function(){return h(this,"isLink")?null:"btn"}.property("isLink"),colorCls:function(){var e=h(this,"baseCls");if(h(this,"color")&&e)return e+"-color-"+h(this,"color")}.property("color","baseCls")});h=Ember.get,m=Ember.set;var O=Ember.typeOf;function M(e,t){var i=h(this,e)||[];return"string"==typeof i&&(i=i.w()),Ember.assert("[editable-container] ClassNames defined for "+e+" must be either a string or an array","array"===O(i)),t&&(i=i.concat(t)),m(this,e,i),i}function R(e){return"[editable-container:"+h(this,"contentKey")+"] "+e}var k=Elib.EditableView.extend();function P(t,e){return new qq.DragAndDrop({dropZoneElements:e,classes:{dropActive:"cssClassToAddToDropZoneOnEnter"},callbacks:{processingDroppedFilesComplete:function(e){t.addFiles(e)}}})}a.EEditableContainerComponent=Ember.Component.extend({editAction:"editSection",editItemAction:"editSectionItem",doneEditAction:"doneEditSection",actions:{editing:function(e){if(!h(this,"isList")||h(this,"multiEdit"))return this.sendAction("editAction",h(this,"contentKey"),e);this.sendAction("editItemAction",h(this,"contentKey"),e)},doneEditing:function(e){this.sendAction("doneEditAction",h(this,"contentKey"),e)}},classNameBindings:["contentKey","editable::read-only"],classNames:["editable-container"],tagName:"section",autoSwitchOnSave:!0,multiEdit:!1,title:null,editable:!0,url:null,isList:null,contentKey:null,content:null,modelClass:null,model:Ember.computed.alias("content"),isEditing:Ember.computed.alias("containerController.isEditing"),renderHeader:Ember.computed.or("headerClass","headerTemplate"),renderFooter:Ember.computed.or("footerClass","footerTemplate"),contextName:function(){return h(this,"isList")&&this.singleOf()||h(this,"contentKey")}.property("isList"),listTagName:"li",editViewTagName:null,displayViewTagName:null,containerTagName:function(){return"li"===h(this,"itemTagName")?"ul":"div"}.property("itemTagName"),itemTagName:function(){return h(this,"isList")?h(this,"listTagName"):"div"}.property("isList"),containerClass:null,editViewClass:null,headerClass:null,footerClass:null,emptyViewClass:null,displayViewClass:null,headerTemplate:null,footerTemplate:null,emptyViewTemplate:null,containerView:null,emptyView:function(){var e=h(this,"contentKey"),t=h(this,"container"),i=h(this,"emptyViewClass"),n=h(this,"emptyViewTemplate")||e+"-empty",s=t.lookup("template:"+n);return s&&Ember.View.extend({template:s,classNames:i})}.property("emptyViewTemplate","emptyViewClass","contentKey"),containerController:null,itemController:null,singleOf:function(e){return e=e||h(this,"contentKey"),h(this,"serializer").singleOf(e)},lookupModel:function(e,t){var i=e?this.singleOf():h(this,"contentKey"),n=h(this,"container").lookupFactory("model:"+i);return n&&t&&m(this,"modelClass",n),n},prepareView:function(e){var t=h(this,"multiEdit"),i=e.content,n=e.target,s=e.controller,r=this.container,o=h(this,"itemController"),a=h(this,"contentKey"),l=i&&h(i,"id"),c=h(this,"contextName");return s||(!l&&t&&(l="New"+h(i,"clientId")),(s=r.lookup("itemController:"+a+(l||"New")))?l||s.set("model",i):(s=o.create({model:i,target:n||this,name:c}),t&&!l&&(l="New"+h(i,"clientId")),function e(t,i,n){var s,r=h(i,"content.id");return n=n||r||"New",i._registerName?this.unregister(i._registerName):r||i.addObserver("content.id",this,function(){e.call(this,t,i)}),s="itemController:"+t+n,i._registerName=s,this.register(s,i,{singleton:!0,instantiate:!1})}.call(r,a,s,l))),{controller:s,context:s,tagName:h(this,"itemTagName"),editViewTagName:h(this,"editViewTagName"),displayViewTagName:h(this,"displayViewTagName"),editViewClass:h(this,"editViewClass"),displayViewClass:h(this,"displayViewClass"),editTemplateName:h(this,"editTemplateName")||c.dasherize()+"-edit",displayTemplateName:h(this,"displayTemplateName")||c.dasherize()+"-display"}},init:function(){function e(e){return d.lookupFactory("controller:"+e)}var t,i,n,s=this,r=h(this,"isList"),o=h(this,"contentKey"),a=h(this,"content"),l=h(this,"modelClass"),c=h(this,"containerController"),u=h(this,"itemController"),d=h(this,"container");this._super(),a||(Ember.bind(this,"content","_parentView.context."+o),a=h(this,"content")),n="array"===O(a),Ember.isNone(r)?(l=Ember.isEmpty(a)?(r=!!(l=this.lookupModel(!0,!0)),l||this.lookupModel(!1,!0)):(m(this,"isList",r=n),l||this.lookupModel(!0,!0)||this.lookupModel(!1,!0)),m(this,"isList",r),Ember.warn(R.call(this,"You didn't submit the data object or the type (object/list) for the editable-container `"+o+"`, assuming `object`!"),r)):l=l||this.lookupModel(r,!0),Ember.warn(R.call(this,"The model for the editable-container `"+o+" is undefined. if the content is empty you must declare it's model"),l),"string"==typeof c&&(c=e(c),Ember.warn(R.call(this,"containerController `"+c+"` is not found"),c)),c=c||(e(o)||e(r?"editableList":"editableViewDefault")),M.call(this,"emptyViewClass","empty-view"),M.call(this,"displayViewClass"),M.call(this,"editViewClass"),"class"===O(c)&&(c=c.create({title:h(this,"title"),target:this,contentBinding:"target.content",itemClassBinding:"target.modelClass"})),Ember.assert(R.call(this,"containerController must be either class or and instance, got `"+O(c)+"`"),"instance"===O(c)),m(this,"containerController",c),d.has("containerController:"+o)||d.register("containerController:"+o,c,{singleton:!0,instantiate:!1}),i=r?(Ember.isEmpty(a)&&m(this,"content",[]),"string"==typeof u&&(u=e(u),Ember.warn(R.call(this,"itemController `"+u+"` is not found"),u)),u=u||(e(this.singleOf())||e("editableViewDefault")),Ember.assert("itemController must be a class, got `"+O(u)+"`",u.isClass),m(this,"itemController",u),Ember.CollectionView.extend({controller:c,classNames:["editable-container-container"],contentBinding:"controller.content",tagNameBinding:"controller.target.containerTagName",emptyViewBinding:"controller.target.emptyView",itemViewClass:k.extend({classNames:M.call(this,"listItemClass"),isLastItem:function(){return h(this,"parentView.lastObject")===this}.property("parentView.lastObject"),isFirstItem:function(){return h(this,"parentView.firstObject")===this}.property("parentView.firstObject")}),createChildView:function(e,t){return t&&Ember.setProperties(t,s.prepareView({content:h(t,"content"),target:c})),this._super(e,t)}})):((t=this.prepareView({controller:c})).tagNameBinding="parentView.containerTagName",k.extend(t)),m(this,"containerView",i),d.has("sectionView:"+o)&&this.container.unregister("sectionView:"+o),this.container.register("sectionView:"+o,this,{singleton:!0,instantiate:!1})}}),a.EImageUploaderComponent=Ember.Component.extend({classNames:["image-uploader"],actions:{selectFile:function(){h(this,"uploadElement").trigger("click"),m(this,"lastUploadId")},retry:function(){var e=h(this,"uploaderInstance"),t=h(this,"lastUploadId");if(!t)return this.send("selectFile");e.retry(t)},zoomIn:function(){h(this,"cropInstance").zoomIn()},zoomOut:function(){h(this,"cropInstance").zoomOut()}},enableUpload:null,croppable:!0,value:null,src:null,error:null,invalidImage:null,emptyIcon:null,uploadUrl:null,cropX:null,cropY:null,cropW:null,cropH:null,enableCrop:null,getPreviewImage:function(){if("inDOM"===this._state)return this.$(".upload-preview")},updateCropData:function(e,t){m(this,"cropX",t.cropX),m(this,"cropY",t.cropY),m(this,"cropH",t.cropH),m(this,"cropW",t.cropW)},width:Ember.computed(function(){var e=this.getPreviewImage();if(e)return e.width()}),height:Ember.computed(function(){var e=this.getPreviewImage();if(e)return e.height()}),cropOptions:Ember.computed("height","width",function(){return{width:h(this,"width"),height:h(this,"height"),controls:$()}}),toggleCrop:function(){var e,t,i=h(this,"cropInstance");i?i.updateOptions(e):(t=this.getPreviewImage(),e=h(this,"cropOptions"),i=t.cropbox(e).data("cropbox"),t.on("cropbox",Ember.run.bind(this,"updateCropData")),m(this,"cropInstance",i))},srcChange:function(){m(this,"invalidImage")}.observes("src"),uploadElement:Ember.computed("uploaderInstance",function(){if(h(this,"uploaderInstance"))return this.$(".upload-element input")}),uploadDidComplete:function(e,t,i){var n;i&&i.success?(h(this,"croppable")&&m(this,"enableCrop",!0),n=i.data.attachment_id,m(this,"value",n),m(this,"error")):i.error?m(this,"error",i.error):(m(this,"lastUploadId"),m(this,"error","Erreur inconnue!"))},imageNotFoundHandler:function(){h(this,"value")&&m(this,"error","INVALID_IMAGE"),m(this,"invalidImage",!0)},imageLoaded:function(){h(this,"enableCrop")&&this.toggleCrop()},enableCropDidChange:function(){Ember.run.scheduleOnce("afterRender",this,function(){var e=this.getPreviewImage();e.on("error",Ember.run.bind(this,"imageNotFoundHandler")),e.on("load",Ember.run.bind(this,"imageLoaded"))})}.observes("enableCrop").on("init"),didInsertElement:function(){var e,t=h(this,"width"),i=h(this,"height"),n=this.$().css("position");this.$().css({width:t,height:i,position:"static"===n?"relative":n}),e=new qq.FineUploaderBasic({multiple:!1,button:this.$(".upload-element").get(0),request:{inputName:"upload",filenameParam:"uploadFileName",endpoint:h(this,"uploadUrl")},callbacks:{onComplete:Ember.run.bind(this,"uploadDidComplete")}}),m(this,"uploaderInstance",e),P(e,[h(this,"element")])}}),Ember.Handlebars.registerHelper("center-me",function(e){var t=Ember.uuid();return e.data.view.on("didInsertElement",function(){var e=$("[data-centered-element="+t+"]");e.css({position:"absolute",top:"50%",left:"50%",margin:"-"+e.height()/2+"px 0 0 -"+e.width()/2+"px"})}),'data-centered-element="'+t+'"'}),a.CvLinkInputComponent=Elib.ETextInputComponent.extend({layoutName:"components/e-text-input",actionIconAction:"removeLink",tabindex:0,link:null,autofocus:!0,validationMessage:null,actionContext:Ember.computed.alias("link"),value:Ember.computed.alias("link.url"),isValid:Ember.computed.alias("link.isValid"),fieldIcon:Ember.computed.alias("link.icon"),formatedValidationMessage:Ember.computed("link.exampleUrls",function(){var e=Ember.makeArray(h(this,"link.exampleUrls"));return 0<e.length?Ember.String.loc("URL_FORMAT_INVALID")+Ember.String.loc("URL_EXAMPLES",e.join("<br>")):"URL_FORMAT_INVALID"}),placeholder:Ember.computed("link",function(){var e=h(this,"link.exampleUrls.firstObject");if(e)return"Ex: "+e}),focusOut:function(){Ember.run.later(this,function(){this.showValidationMessage=!0,this.hasFocus=!1,this.validate()},200)},focusIn:function(){this.hasFocus=!0},validate:function(){var e;if(h(this,"isValid"))return m(this,"validationMessage"),Ember.RSVP.Promise.resolve();if(this.showValidationMessage){if(!h(this,"value")&&!this.hasFocus)return this.sendAction("actionIconAction",h(this,"link"));e=h(this,"formatedValidationMessage"),m(this,"validationMessage",e),this.isValidDidChange()}return Ember.RSVP.Promise.reject()}.observes("value")});var F=Ember.RSVP.Promise;function P(t,e){return new qq.DragAndDrop({dropZoneElements:e,classes:{dropActive:"cssClassToAddToDropZoneOnEnter"},callbacks:{processingDroppedFilesComplete:function(e){t.addFiles(e)}}})}a.PhoneEmailEditorComponent=Ember.Component.extend(Elib.InputValidationMixin,{init:function(){var e,t,i=h(this,"content")||[];m(this,"content",i),e=h(this,"modelName"),t=this.container.lookupFactory("model:"+e),Ember.assert("The model class for <"+e+"> was not found",e),m(this,"modelClass",t),h(this,"isRequired")&&h(this,"empty")&&h(this,"autoInsertNew")&&(m(this,"autofocus"),this.insertNew()),this._super()},classNames:["phone-email-editor"],attributeBindings:["tabindex"],classNameBindings:["editorClassName"],tabindex:-1,content:null,newEntry:null,actionIcon:Ember.computed("deleteIcon","empty","isRequired",function(){if(!h(this,"isRequired")||!h(this,"empty"))return h(this,"deleteIcon")}),deleteIcon:"times",selection:null,addButtonText:null,modelName:null,required:null,validationMessage:null,requiredMessage:null,autoInsertNew:null,error:Ember.computed.alias("validationMessage"),isValid:Ember.computed.not("validationMessage"),empty:Ember.computed.not("content.length"),autoShowTooltip:!1,suggestAfterError:null,suggestAfterSuccess:null,cancelButtonTooltip:"CANCEL",isRequired:Ember.computed.alias("required"),newValue:Ember.computed("newEntry.label",function(){var e=h(this,"newEntry.label");return"string"==typeof e&&e.trim()||null}),emptyMessage:Ember.computed("empty",function(){return h(this,"empty")?h(this,"requiredMessage"):"REQUIRED_FIELD"}),inputClassName:Ember.computed("empty",function(){return h(this,"empty")?"spaced-top":null}),selectionDidChange:function(){var e=h(this,"selection");e&&(h(this,"content").pushObject(e),this.removeNew(),m(this,"selection"))}.observes("selection"),_updateFocus:function(e){this.isDestroyed||(m(this,"hasFocus",e),!1!==e||h(this,"newValue")||Ember.run.later(this,this.removeNew,150))},focusIn:function(){return Ember.run.debounce(this,"_updateFocus",!0,50),!0},focusOut:function(){return Ember.run.debounce(this,"_updateFocus",!1,50),!0},_editInputFocusOut:function(e){if(!this.isDestroyed&&!0!==e)return h(this,"newEntry")?h(this,"newValue")?void this.confirmNewEntry():this.removeNew():this.validate()},editInputFocusOut:function(){var e=h(this,"targetObject");Ember.run.debounce(e,"_editInputFocusOut",!1,150)},syncValidationMessage:function(e){m(this,"validationMessage",e),Ember.run.later(this,function(){this.input&&this.input.isValidDidChange()},200)},insertNew:function(){var e=this.get("modelClass").create({isNew:!0,isValid:!1,label:""});m(this,"validationMessage"),Ember.run.later(this,function(){m(this,"newEntry",e)},50)},removeNew:function(){if(!this.isDestroyed){if(h(this,"isRequired")&&h(this,"empty"))return this.validate();m(this,"validationMessage"),m(this,"newEntry")}},validate:function(){var e,t=h(this,"newEntry"),i=h(this,"empty");return h(this,"isRequired")&&i&&!t?(e=h(this,"requiredMessage"),this.syncValidationMessage(e),F.reject(e)):this.validateNewEntry()},validateNewEntry:function(){var e,t=h(this,"newEntry"),i=h(this,"empty"),n=h(this,"newValue");return t?!n&&i?(e=h(this,"emptyMessage"),this.syncValidationMessage(e),F.reject(e)):this.remoteValidate():F.resolve()},remoteValidate:function(){var e,i=this,n=h(i,"newEntry"),s=h(this,"modelName");return this._remoteValidationPromise?this._remoteValidationPromise:n?((e=Ember.merge({task:s+".validate"},this.get("params"))).jform[s]=n.get("label"),m(this,"isLoading",!0),this._remoteValidationPromise=h(i,"server").saveJSON(e).then(function(e){if(n.mergeIf(e),i.syncValidationMessage(),"email"==s){var t=h(e,"suggest")||null;i.updateSuggestAfterSuccess(t,n)}return n},function(e){if("email"==s){var t=h(e.content,"responseJSON.data.suggest")||null;i.updateSuggestAfterError(t)}i.syncValidationMessage(e)}).finally(function(){m(i,"isLoading",!1),delete i._remoteValidationPromise}),this._remoteValidationPromise):F.resolve()},confirmNewEntry:function(){var t=this,e=h(this,"newValue"),i=h(this,"content");return i.isAny("label",e.trim())&&t.removeNew(),this.validate().then(function(e){e&&(t.removeNew(),i.pushObject(e),h(t,"itemAddedAction")&&t.sendAction("itemAddedAction",e),h(t,"autoInsertNew")&&t.insertNew())})},updateSuggestAfterError:function(e){m(this,"suggestAfterError",e),m(this,"suggestAfterSuccess")},updateSuggestAfterSuccess:function(e,t){m(this,"suggestAfterSuccess",e),h(this,"content").forEach(function(e){m(e,"hasSuggest")}),t.set("hasSuggest",!!e),m(this,"suggestAfterError")},actions:{remove:function(e){m(this,"autoShowTooltip",!0),h(this,"content").removeObject(e),h(this,"empty")&&h(this,"isRequired")&&h(this,"autoInsertNew")&&this.insertNew()},add:function(){m(this,"autofocus",!0),this.insertNew()},confirm:function(){var e=this;h(e,"isAdding")||(m(e,"autoShowTooltip",!0),m(e,"isAdding",!0),Ember.run.debounce(e,"_editInputFocusOut",!0,50),this.confirmNewEntry().then(function(){m(e,"isAdding",!1)}))},cancel:function(){Ember.run.debounce(this,"_editInputFocusOut",!0,50),this.removeNew()},retry:function(){this.confirmNewEntry()},registerInput:function(e){this.input=e},unregisterInput:function(){delete this.input},resendValidationEmail:function(t){var e=Ember.merge({task:"email.resendValidation"},this.get("params"));e.jform.email=t.get("label"),e.jform.id=t.get("id"),t.set("isLoading",!0),h(this,"server").saveJSON(e).then(function(e){t.set("isRequested",!0),t.set("isSent",!0),t.set("isLoading",!1)},function(e){t.set("isRequested",!0),t.set("isSent",!1),t.set("isLoading",!1)})},applySuggest:function(e){var t=h(this,"suggestAfterSuccess.text")||h(this,"suggestAfterError.text"),i=h(this,"content"),n=!1;m(this,"suggestAfterSuccess"),m(this,"suggestAfterError"),e&&i.removeObject(e);var s=this.get("modelClass").create({isNew:!0,isValid:!1,label:t});i.forEach(function(e){e.email==t.trim()&&(n=!0)}),1!=n&&(h(this,"content").pushObject(s),m(this,"validationMessage"),Ember.run.later(this,function(){m(this,"newEntry",s)},50))}}}),a.UploadInputComponent=Ember.Component.extend({registerAction:"registerInput",unregisterAction:"unregisterInput",showWarning:!1,warningTooltipDelay:500,validate:function(){var e=!!h(this,"content.length");m(this,"showWarning",!e&&h(this,"warningTooltipDelay")),Ember.RSVP.Promise.resolve()},init:function(){this._super();try{this.sendAction("registerAction",this)}catch(e){}},classNames:["upload-input"],actions:{selectFile:function(){h(this,"uploadElement").trigger("click"),m(this,"lastUploadId")},deleteAttchment:function(e){this.get("content").removeObject(e)},retry:function(){var e=h(this,"uploaderInstance"),t=h(this,"lastUploadId");if(!t)return this.send("selectFile");e.retry(t)}},content:null,isEnabled:null,error:null,uploadUrl:null,uploadElement:Ember.computed("uploaderInstance",function(){if(h(this,"uploaderInstance"))return this.$(".upload-element input")}),uploadDidComplete:function(e,t,i){var n,s,r=i.data&&i.data.attachment_id;i&&i.success?(n=a.Attachment.create({attachmentId:r,attachmentOriginalName:t}),s=h(this,"content"),h(this,"multiple")||s.removeObject(s[0]),s.addObject(n),m(this,"error")):i.error?m(this,"error",i.error):m(this,"error","REQUEST_ERROR"),m(this,"isLoading")},uploadDidStart:function(){m(this,"error"),m(this,"isLoading",!0)},didInsertElement:function(){var e;e=new qq.FineUploaderBasic({multiple:!1,button:this.$(".upload-element").get(0),request:{inputName:"upload",filenameParam:"uploadFileName",endpoint:h(this,"uploadUrl")},callbacks:{onUpload:Ember.run.bind(this,"uploadDidStart"),onComplete:Ember.run.bind(this,"uploadDidComplete")}}),m(this,"uploaderInstance",e),P(e,[h(this,"element")])},willDestroy:function(){try{this.sendAction("unregisterAction",this)}catch(e){}}.on("willDestroy")});Elib.toArray;if(a.EEditableContainerComponent.reopen({watchResize:!0,insertOverlay:function(){h(this,"modalView").show(this.getView(),h(this,"contentKey"))},removeOverlay:function(){h(this,"modalView").hide()},getView:function(){var e,t=h(this,"childViews"),i=h(this,"renderHeader")?t[1]:t[0],n=h(this,"containerController.content");return h(this,"isList")?h(this,"multiEdit")?this:(e=h(this,"containerController.editingViews.firstObject"),h(i,"childViews")[n.indexOf(e)]):i},isEditingDidChange:function(){if(h(this,"isEditing"))return Ember.run.scheduleOnce("afterRender",this,this.insertOverlay);this.removeOverlay()}.observes("isEditing").on("init")}),Elib.EButtonComponent.reopen({isActive:null}),Elib.ESelectComponent.reopen({busyIcon:":fa fa-refresh fa-spin"}),Elib.ETextInputComponent.reopen({busyIcon:":fa fa-refresh fa-spin"}),t.App=a,Ember.run.backburner.DEBUG=!1,a.PROMISE_DEBUG=!1,a.LOG_TRANSITIONS=!1,a.LOG_TRANSITIONS_INTERNAL=!1,a.LOG_VIEW_LOOKUPS=!1,a.LOG_ACTIVE_GENERATION=!1,a.LOG_RESOLVER=!1,Ember.LOG_BINDINGS=!1,Ember.ENV.RAISE_ON_DEPRECATION=!1,Ember.LOG_STACKTRACE_ON_DEPRECATION=!1,Ember.RSVP.on("error",function(e){a.PROMISE_DEBUG&&Ember.Logger.assert(!1,e)}),"printStats"in Elib.parseQuery()){var U={views:null,sections:null};Ember.subscribe("render",{before:function(e,t){return t},after:function(e,t,i,n){var s,r=Math.round(t-n);(s=/^view:(.+)$/.exec(i.containerKey))?("cvsCv"===s[1]&&Ember.run.scheduleOnce("afterRender",B),U.views=U.views||{},U.views[s[1]]=r):"component:e-editable-container"===i.containerKey&&(U.sections=U.sections||{},U.sections[Ember.get(i.view,"contentKey")]=r)}})}function B(){U.sections&&(console.group("Sections"),console.dir(U.sections),console.groupEnd()),U.views&&(console.group("Views"),console.dir(U.views),console.groupEnd())}function j(e){return a.__container__.lookup(e)}function z(e){return a.__container__.lookupFactory(e)}function G(e,t){var i=e.nodeName.toLowerCase(),n=$.attr(e,"tabindex");return(/input|select|textarea|button|object/.test(i)?!1!==t||!e.disabled:("a"==i||"area"==i)&&e.href||!isNaN(n))&&!$(e)["area"==i?"parents":"closest"](":hidden").length}Elib.Model.reopen({dirty:Ember.computed("dirtyAttributes",function(){var e=Ember.get(this,"dirtyAttributes");if(e)return e.join(",")})}),a.LOG_ROUTE_RESOLVED_MODELS,Ember.Route.reopen({afterModel:function(e,t){(a.LOG_RESOLVER||a.LOG_ROUTE_RESOLVED_MODELS)&&console.log("resolved model",e,"on",this.routeName," in transition ",t)}}),t.container=a.__container__,j.controller=function(e){return j("controller:"+(e||"application"))},j.model=function(e){return j("model:"+e)},j.view=function(e){return j("view:"+e)},j.route=function(e){return j("route:"+e)},j.session=function(e){return j("session:"+(e||"main"))},j.store=function(e){return j("store:"+(e||"main"))},j.assistant=function(e){return j("assistant:"+(e||"main"))},j.cv=function(e){return t.debugPromise("Cv#"+e,this.store().find("cv",e))},t.look=j,z.controller=function(e){return z("controller:"+(e||"application"))},z.model=function(e){return z("model:"+e)},z.view=function(e){return z("view:"+e)},z.session=function(e){return z("session:"+(e||"main"))},z.route=function(e){return z("route:"+e)},t.factory=z,Ember.Route.reopen({contextDidChange:function(){this._super(),a.LOG_TRANSITIONS_INTERNAL&&(console.groupCollapsed(this.routeName),console.log("params",this.paramsFor(this.routeName)),console.log("context",this.modelFor(this.routeName)),console.groupEnd())}}),t.debugPromise=function(t,e){return t=t&&"("+t+")"||"",e.then(function(e){return console.log("promise resolved",t,e),e},function(e){console.log("promise rejected",t,e)})},t.$=jQuery,$.extend($.expr[":"],{data:function(e,t,i){return!!$.data(e,i[3])},canfocus:function(e){return G(e)},cantab:function(e){var t=$.attr(e,"tabindex");return(isNaN(t)||0<=t)&&$(e).is(":canfocus")},focusable:function(e){return G(e)},tabbable:function(e){var t=$.attr(e,"tabindex");return(isNaN(t)||0<=t)&&$(e).is(":focusable")}}),$(document).ready(function(){$("body").on("keypress","[tabindex]:tabbable",function(e){var t=e.which||e.target;this===e.target&&t===Elib.KEY_CODES_MAP.SPACE&&($(this).click(),e.preventDefault())})})}("undefined"!=typeof exports?exports:this,"undefined"!=typeof jQuery&&jQuery);